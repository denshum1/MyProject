(self.webpackChunkvk=self.webpackChunkvk||[]).push([[6493],{819169:(e,t,r)=>{"use strict";r.d(t,{POLLING_VERSION:()=>a,MINIMUM_TIME_INTERVAL_API:()=>n,CaptchaType:()=>s});var s,a=10,n=1133;!function(e){e.API="API",e.DIRECT_AUTH="DIRECT_AUTH",e.IMPLICIT_FLOW_AUTH="IMPLICIT_FLOW_AUTH",e.ACCOUNT_VERIFICATION="ACCOUNT_VERIFICATION"}(s||(s={}))},737204:(e,t,r)=>{"use strict";r.d(t,{APIError:()=>n});var s=r(250500),a=r(458656);class n extends a.VKError{constructor(e){var t=Number(e.error_code);switch(super({code:t,message:`Code №${t} - ${e.error_msg}`}),this.params=e.request_params,t===s.API_ERROR_CAPTCHA&&(this.captchaSid=Number(e.captcha_sid),this.captchaImg=e.captcha_img),t){case s.API_ERROR_CAPTCHA:this.captchaSid=Number(e.captcha_sid),this.captchaImg=e.captcha_img;break;case s.API_ERROR_AUTH_VALIDATION:this.redirectUri=e.redirect_uri;break;case s.API_ERROR_NEED_CONFIRMATION:this.confirmationText=e.confirmation_text}}}},488006:(e,t,r)=>{"use strict";r.d(t,{ExecuteError:()=>a});var s=r(737204);class a extends s.APIError{constructor(e){super({error_code:e.error_code,error_msg:e.error_msg,request_params:[]}),this.method=e.method}}},364058:(e,t,r)=>{"use strict";r.d(t,{OAuthError:()=>a});var s=r(458656);class a extends s.VKError{constructor(e){super({code:e.error,message:e.error_description})}}},396817:(e,t,r)=>{"use strict";r.d(t,{UpdatesError:()=>a});var s=r(458656);class a extends s.VKError{}},458656:(e,t,r)=>{"use strict";var s;r.d(t,{SharedErrorCode:()=>s,VKError:()=>a}),function(e){e.UNSUPPORTED_MODE="UNSUPPORTED_MODE",e.MISSING_CAPTCHA_HANDLER="MISSING_CAPTCHA_HANDLER",e.MISSING_TOKEN_REGENERATE_HANDLER="MISSING_TOKEN_REGENERATE_HANDLER"}(s||(s={}));class a extends Error{constructor(e){var t=e.code;super(e.message),this.code=t,this.name=this.constructor.name}}},992741:(e,t,r)=>{"use strict";r.d(t,{CallbackService:()=>a});r(241539),r(788674);var s=r(458656);class a{get hasCaptchaHandler(){return void 0!==this.captchaHandler}onCaptcha(e){return this.captchaHandler=e,this}processingCaptcha(e){var t=this.captchaHandler;return t?new Promise(((r,s)=>{t(e,(e=>new Promise(((t,a)=>{if(e instanceof Error)return a(e),void s(e);r({key:e,validate:{resolve:t,reject:a}})}))))})):Promise.reject(new s.VKError({code:s.SharedErrorCode.MISSING_CAPTCHA_HANDLER,message:"Missing captcha handler"}))}get hasTokenRegenerateHandler(){return void 0!==this.tokenRegenerateHandler}onTokenRegenerate(e){return this.tokenRegenerateHandler=e,this}processingTokenRegenerate(){var e=this.tokenRegenerateHandler;return void 0===e?Promise.reject(new s.VKError({code:s.SharedErrorCode.MISSING_TOKEN_REGENERATE_HANDLER,message:"Missing token regenerate handler"})):new Promise(((t,r)=>{e((e=>new Promise(((s,a)=>{if(e instanceof Error)return a(e),void r(e);t({token:e,validate:{resolve:s,reject:a}})}))))}))}}},430041:(e,t,r)=>{"use strict";r.d(t,{EventDispatcher:()=>s});r(57327),r(140561),r(454747);class s{constructor(){this.listeners=[]}hasEventListener(e,t){return this.listeners.some((r=>r.type===e&&r.listener===t))}addEventListener(e,t,r){return void 0===r&&(r={}),this.hasEventListener(e,t)||this.listeners.push({type:e,listener:t,options:r}),this}removeEventListener(e,t){var r=this.listeners.findIndex((r=>r.type===e&&r.listener===t));return-1!==r&&this.listeners.splice(r,1),this}removeEventListeners(){return this.listeners=[],this}dispatchEvent(e){return this.listeners.filter((t=>t.type===e.type)).forEach((t=>{var r=t.type,s=t.listener,a=t.options.once;s.call(this,e),a&&this.removeEventListener(r,s)})),this}}},218517:(e,t,r)=>{"use strict";r.d(t,{APIRequest:()=>s.APIRequest,CallbackService:()=>a.CallbackService});var s=r(670973),a=r(992741)},670973:(e,t,r)=>{"use strict";r.d(t,{APIRequest:()=>u});r(57327),r(66992),r(319601),r(569720),r(838559),r(241539),r(788674),r(339714),r(333948),r(560285),r(535666);var s=r(363476),a=r(144636),n=r(792269);function o(e,t,r,s,a,n,o){try{var i=e[n](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(s,a)}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},i.apply(this,arguments)}class u{constructor(e){var t,r=e.api,s=e.method,a=e.params,n=void 0===a?{}:a,o=e.options,u=void 0===o?{}:o;this.retries=0,this.api=r,this.method=s,this.params=i({},n),this.options=i({},u),null!=(t=this.options).abortController||(t.abortController=new AbortController),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}toString(){return(0,n.getExecuteMethod)(this.method,this.params)}get filteredParams(){var e=this.api.options,t=e.token,r=e.version,s=e.language;return Object.fromEntries([...Object.entries(i({v:r,lang:s,access_token:t},this.params)),...this.api.globalParams.entries()].filter((e=>void 0!==e[1])))}make(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var r,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api.options,s=r.timeout,a=r.requestMethod,t.timeout=setTimeout((()=>{var e;return null==(e=t.options.abortController)?void 0:e.abort()}),s),e.prev=2,e.next=5,t[a]();case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,clearTimeout(t.timeout),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[2,,6,9]])})),function(){var t=this,r=arguments;return new Promise((function(s,a){var n=e.apply(t,r);function i(e){o(n,s,a,i,u,"next",e)}function u(e){o(n,s,a,i,u,"throw",e)}i(void 0)}))})()}fetch(){var e=this.options.abortController,t=this.api.options.baseUrl;return fetch(new URL(`/method/${this.method}`,t),{method:"POST",signal:null==e?void 0:e.signal,headers:{connection:"keep-alive"},body:new URLSearchParams(this.filteredParams)}).then((e=>e.json()))}bridge(){var e=this.options.abortController;return new Promise(((t,r)=>{(null==e?void 0:e.signal.aborted)&&r(e.signal.reason),null==e||e.signal.addEventListener("abort",(()=>{r(e.signal.reason)})),s.send("VKWebAppCallAPIMethod",{method:this.method,params:this.filteredParams}).then(t).catch((e=>{var r=e.error_data;t({error:(null==r?void 0:r.error_reason)||r||e})}))}))}script(){var e=this.options.abortController,t=this.api.options.baseUrl;return new Promise(((r,s)=>{(null==e?void 0:e.signal.aborted)&&s(e.signal.reason);var n=(0,a.generateId)(20),o=new URLSearchParams(this.filteredParams);o.set("callback",n);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=new URL(`/method/${this.method}?${o}`,t).toString(),window[n]=e=>{i.remove(),delete window[n],r(e)},null==e||e.signal.addEventListener("abort",(()=>{i.remove(),delete window[n],s(e.signal.reason)})),document.head.appendChild(i)}))}}},455835:(e,t,r)=>{"use strict";r(667294)},137395:(e,t,r)=>{"use strict";r.d(t,{APIRequestMode:()=>o,API:()=>I,VKError:()=>v.VKError,UpdatesSource:()=>p.UpdatesSource,VmojiQueueEventType:()=>p.VmojiQueueEventType,getRandomId:()=>m.getRandomId});r(66992),r(651532),r(241539),r(333948);var s,a,n,o,i,u=r(746283),c=r(218517),l=r(314809),h=r(829432),d=r(33019),p=r(87862),v=(r(364058),r(396817),r(488006),r(458656)),m=(r(737204),r(455835),r(670793));r(787302),r(729117);function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},E.apply(this,arguments)}!function(e){e.PARALLEL="parallel",e.SEQUENTIAL="sequential"}(n||(n={})),function(e){e.SEQUENTIAL="sequential",e.BURST="burst"}(o||(o={})),function(e){e.FETCH="fetch",e.SCRIPT="script",e.BRIDGE="bridge"}(i||(i={}));var b="undefined"!=typeof window&&(null==(s=window.vk)||null==(a=s.apiConfigDomains)?void 0:a.apiDomain)||"api.vk.com";class I extends c.CallbackService{constructor(e,t){var r;void 0===t&&(t={}),super(),r=this,this.globalParams=new Map,this.options=E({mode:n.SEQUENTIAL,requestMode:o.SEQUENTIAL,requestMethod:i.FETCH,wait:3e3,limit:3,bridge:!1,version:u.API_VERSION,baseUrl:`https://${b}`,retryLimit:3,timeout:6e4,executeCount:25,language:"ru",executeUnsupportedMethods:["photos.save","photos.saveWallPhoto","photos.saveOwnerPhoto","photos.saveMessagesPhoto","messages.setChatPhoto","photos.saveMarketPhoto","photos.saveMarketAlbumPhoto","audio.save","docs.save","photos.saveOwnerCoverPhoto","stories.save","polls.savePhoto"]},e);for(var s,a=function(e){r[e]=new Proxy(Object.create(null),{get:(t,s)=>(t,a)=>r.callWithRequest(new c.APIRequest({api:r,method:`${e}.${s}`,params:t,options:a}))})},l=f(d.methodGroups);!(s=l()).done;){a(s.value)}this.worker=this.getWorker(),this.updates=new p.Updates(this,t)}execute(e){return this.call("execute",e)}procedure(e,t){return this.call(`execute.${e}`,t)}call(e,t){return this.callWithRequest(new c.APIRequest({method:e,params:t,api:this}))}callWithRequest(e){return this.worker.enqueue(e),e.promise}getWorker(){switch(this.options.mode){case n.PARALLEL:return new l.ParallelWorker(this);case n.SEQUENTIAL:return new h.SequentialWorker(this)}}}},33019:(e,t,r)=>{"use strict";r.d(t,{methodGroups:()=>s});var s=["account","actionLinks","address","adex","admins","ads","adsint","adsweb","aliexpress","antispam","appWidgets","apps","articles","asr","audio","audioSearch","auth","autotests","badges","bestFriends","biz","board","bot","botsConf","bugtracker","calls","captcha","cashout","catalog","channels","classifieds","combo","coupons","crowd","database","deliveryClub","docs","documentation","donut","downloadedGames","education","educationForeign","educationParents","educationPolls","educationUser","email","esia","exchange","exchangeRates","execute","experts","explore","externalAudioMatching","externalUsers","fave","finance","findMe","forbiddenRegistry","fortuneSquare","fortuneWheel","friends","gamesPromo","getUserInfo","getUserInfoEx","gifts","golunch","goodsOrders","groups","healthApp","healthCommon","healthLoyalty","identity","instManager","interests","internal","leadForms","leads","lifeEvents","likes","lovina","loyalty","loyaltyTeen","market","marusia","masks","matching","memories","messages","microlandings","mobile","money","musicManager","narratives","newsfeed","nft","nospam","notes","notifications","odnoklassniki","onboarding","orders","pages","phones","photos","places","platform","platformConsole","podcasts","podcastsOffice","polls","prettyCards","promoCodes","questions","queue","reports","restore","rewardedAds","rightholders","search","secure","serverCalls","serverEffects","settings","shortVideo","signals","situationalSuggests","sms","social","specials","statEvents","stats","statsDashboard","status","storage","store","stories","streaming","studentsVerification","studio","superApp","support","survey","tags","tariffs","textlives","tickets","translations","uma","users","utils","uxpolls","verification","video","videoPostcards","vkCharity","vkMusic","vkRun","vkStart","vkTaxi","vkUp","vkdrive","vkstore","vmoji","voicerooms","wall","weather","widgets","widgetsIOS","widgetsKit","wishlists"]},823919:(e,t,r)=>{"use strict";r.d(t,{VmojiQueueEvent:()=>s.VmojiQueueEvent,VmojiQueueEventType:()=>s.VmojiQueueEventType});var s=r(143211)},143211:(e,t,r)=>{"use strict";var s;r.d(t,{VmojiQueueEventType:()=>s,VmojiQueueEvent:()=>a}),function(e){e.AVATAR="avatar",e.STICKERS="stickers",e.CHARACTER="character",e.STICKERS_PRINT_REQUEST="stickers_print_request"}(s||(s={}));class a extends CustomEvent{constructor(e,t){super(e,{detail:t})}}},87862:(e,t,r)=>{"use strict";r.d(t,{UpdatesSource:()=>s,Updates:()=>g,VmojiQueueEventType:()=>u.VmojiQueueEventType});r(66992),r(241539),r(788674),r(923157),r(333948),r(560285),r(535666);var s,a,n,o=r(396817),i=r(430041),u=r(823919),c=r(470060),l=r(819169);function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},p.apply(this,arguments)}function v(e,t){if(null==e)return{};var r,s,a={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(a[r]=e[r]);return a}function m(e,t,r,s,a,n,o){try{var i=e[n](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(s,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(s,a){var n=e.apply(t,r);function o(e){m(n,s,a,o,i,"next",e)}function i(e){m(n,s,a,o,i,"throw",e)}o(void 0)}))}}!function(e){e.USER="user",e.GROUP="group",e.VMOJI="vmoji"}(s||(s={})),function(e){e.CHECK="a_check",e.RELEASE="a_release"}(a||(a={})),function(e){e.NEED_RESTART="NEED_RESTART",e.POLLING_REQUEST_FAILED="POLLING_REQUEST_FAILED"}(n||(n={}));class g extends i.EventDispatcher{constructor(e,t){void 0===t&&(t={}),super(),this.mode=202,this.started=!1,this.ts=0,this.pts=0,this.restarted=0,this.api=e;var r=t,s=r.source,a=r.userId,n=r.groupId,o=r.wait,i=r.retryLimit;this.source=s,this.userId=a,this.groupId=n,this.wait=o||3e3,this.retryLimit=i||3}start(){var e=this;return f(regeneratorRuntime.mark((function t(){var r,n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.started){t.next=2;break}return t.abrupt("return");case 2:return e.started=!0,t.prev=3,t.next=6,e.getLongPollServer();case 6:r=t.sent,n=r.server,o=r.key,i=r.ts,0===e.ts&&(e.ts=i),e.url=new URL(n),e.url.searchParams.set("key",o),e.url.searchParams.set("act",a.CHECK),e.url.searchParams.set("wait","25"),e.url.searchParams.set("mode",String(e.mode)),e.url.searchParams.set("version",String(l.POLLING_VERSION)),t.t0=e.source,t.next=t.t0===s.VMOJI?20:22;break;case 20:return e.url.searchParams.set("id",String(e.userId)),t.abrupt("break",22);case 22:e.startFetchLoop(),t.next=29;break;case 25:throw t.prev=25,t.t1=t.catch(3),e.started=!1,t.t1;case 29:case"end":return t.stop()}}),t,null,[[3,25]])})))()}getLongPollServer(){var e=this;return f(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.source,t.next=t.t0===s.GROUP?3:t.t0===s.VMOJI?7:(t.t0,s.USER,11);break;case 3:return t.next=5,e.api.groups.getLongPollServer({group_id:e.groupId});case 5:case 9:case 13:return r=t.sent,t.abrupt("break",15);case 7:return t.next=9,e.api.vmoji.subscribeToQueue().then((e=>p({server:e.base_url},v(e,["base_url"]))));case 11:return t.next=13,e.api.messages.getLongPollServer({lp_version:l.POLLING_VERSION});case 15:return a=r.server,r.server=`${a.startsWith("https")?"":"https://"}${a}`,t.abrupt("return",r);case 18:case"end":return t.stop()}}),t)})))()}stop(){var e=this;return f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.started=!1,e.restarted=0;case 2:case"end":return t.stop()}}),t)})))()}startFetchLoop(){var e=this;return f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;case 1:if(!e.started){t.next=6;break}return t.next=4,e.fetchUpdates();case 4:t.next=1;break;case 6:t.next=33;break;case 8:if(t.prev=8,t.t0=t.catch(0),t.t0.code===n.NEED_RESTART||e.restarted===e.retryLimit){t.next=16;break}return e.restarted+=1,t.next=14,(0,c.wait)(3e3);case 14:return e.startFetchLoop(),t.abrupt("return");case 16:if(!e.started){t.next=33;break}return t.prev=17,t.next=20,e.stop();case 20:return t.next=22,e.start();case 22:return t.abrupt("break",33);case 25:return t.prev=25,t.t1=t.catch(17),console.log(t.t1),e.started=!0,t.next=31,(0,c.wait)(e.wait);case 31:t.next=16;break;case 33:case"end":return t.stop()}}),t,null,[[0,8],[17,25]])})))()}fetchUpdates(){var e=this;return f(regeneratorRuntime.mark((function t(){var r,s,a,i,u,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.url.searchParams.set("ts",String(e.ts)),r=new AbortController,s=setTimeout((()=>r.abort()),3e4),t.prev=3,t.next=6,fetch(e.url,{method:"GET",signal:r.signal,headers:{connection:"keep-alive"}});case 6:if((i=t.sent).ok){t.next=9;break}throw new o.UpdatesError({code:n.POLLING_REQUEST_FAILED,message:"Polling request failed"});case 9:return t.next=11,i.json();case 11:a=t.sent;case 12:return t.prev=12,clearTimeout(s),t.finish(12);case 15:if(void 0===a.failed){t.next=21;break}if(1!==a.failed){t.next=19;break}return e.ts=a.ts,t.abrupt("return");case 19:throw e.ts=0,new o.UpdatesError({code:n.NEED_RESTART,message:"The server has been failed"});case 21:for(e.restarted=0,e.ts=a.ts,a.pts&&(e.pts=Number(a.pts)),a.updates=a.updates||a.events||[],u=h(a.updates);!(c=u()).done;)l=c.value,e.handleUpdate(l);case 26:case"end":return t.stop()}}),t,null,[[3,,12,15]])})))()}handleUpdate(e){if(this.source===s.VMOJI){var t=e.data,r=t.type,a=t.query_id;a&&this.dispatchEvent(new u.VmojiQueueEvent(a,t)),this.dispatchEvent(new u.VmojiQueueEvent(r,t))}}}},144636:(e,t,r)=>{"use strict";function s(e){for(var t="abcdefghijklmnopqrstuvwxyz",r="",s=0;s<e;s++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}r.d(t,{generateId:()=>s})},729117:(e,t,r)=>{"use strict";var s;r(363476);!function(e){e.WALL="wall",e.DOCS="docs",e.STATS="stats",e.VIDEO="video",e.PAGES="pages",e.NOTES="notes",e.MANAGE="manage",e.MARKET="market",e.PHOTOS="photos",e.STATUS="status",e.GROUPS="groups",e.OFFLINE="offline",e.STORIES="stories",e.FRIENDS="friends",e.MESSAGES="messages",e.APP_WIDGET="app_widget"}(s||(s={}))},8087:(e,t,r)=>{"use strict";function s(e){return`return [${e.join(",")}];`}r.d(t,{getChainReturn:()=>s})},792269:(e,t,r)=>{"use strict";r.d(t,{getExecuteMethod:()=>a});var s=r(951017);function a(e,t){return void 0===t&&(t={}),`API.${e}(${(0,s.getExecuteParams)(t)})`}},951017:(e,t,r)=>{"use strict";function s(e){return JSON.stringify(e,((t,r)=>"object"==typeof r&&r!==e?String(r):r))}r.d(t,{getExecuteParams:()=>s})},787302:(e,t,r)=>{"use strict";r(226699),r(66992),r(241539),r(788674),r(132023),r(333948),r(560285),r(535666),r(737204),r(364058),r(470060)},670793:(e,t,r)=>{"use strict";function s(){return Math.floor(1e4*Math.random())*Date.now()}r.d(t,{getRandomId:()=>s})},13841:(e,t,r)=>{"use strict";r.d(t,{resolveExecuteTask:()=>s});r(454747);function s(e,t){var r=0;t.response.forEach(((s,a)=>{var n=e[a];!1===s?(n.reject(t.errors[r]),r++):n.resolve(s)}))}},470060:(e,t,r)=>{"use strict";r.d(t,{wait:()=>s});r(241539),r(788674);function s(e){return new Promise((t=>{setTimeout(t,e)}))}},314809:(e,t,r)=>{"use strict";r.d(t,{ParallelWorker:()=>l});r(226699),r(821249),r(140561),r(241539),r(788674),r(132023),r(923157),r(535666);var s=r(218517),a=r(829432),n=r(8087),o=r(13841);function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function c(e,t,r,s,a,n,o){try{var i=e[n](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(s,a)}class l extends a.SequentialWorker{execute(){var e,t=()=>super.execute,r=this;return(e=regeneratorRuntime.mark((function e(){var a,u,c,l,h,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.queue,!r.isAllowedMethod(a[0].method)){e.next=4;break}return t().call(r),e.abrupt("return");case 4:u=r.api.options.executeCount,c=[],l=0;case 7:if(!(l<r.queue.length)){e.next=17;break}if(!r.isAllowedMethod(a[l].method)){e.next=10;break}return e.abrupt("continue",14);case 10:if(c.push(a.splice(l,1)[0]),l-=1,!(c.length>=u)){e.next=14;break}return e.abrupt("break",17);case 14:l+=1,e.next=7;break;case 17:if(0!==c.length){e.next=19;break}return e.abrupt("return");case 19:return h=new s.APIRequest({api:r.api,method:"execute",params:{code:(0,n.getChainReturn)(c.map(String))}}),t().call(r,h),e.prev=21,e.t0=o.resolveExecuteTask,e.t1=c,e.next=26,h.promise;case 26:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=33;break;case 30:for(e.prev=30,e.t3=e.catch(21),d=i(c);!(p=d()).done;)p.value.reject(e.t3);case 33:case"end":return e.stop()}}),e,null,[[21,30]])})),function(){var t=this,r=arguments;return new Promise((function(s,a){var n=e.apply(t,r);function o(e){c(n,s,a,o,i,"next",e)}function i(e){c(n,s,a,o,i,"throw",e)}o(void 0)}))})()}isAllowedMethod(e){return e.startsWith("execute")||this.api.options.executeUnsupportedMethods.includes(e)}}},829432:(e,t,r)=>{"use strict";r.d(t,{SequentialWorker:()=>h});r(821249),r(241539),r(788674),r(923157),r(535666);var s=r(250500),a=r(349805),n=r(737204),o=r(488006),i=r(470060),u=r(819169);function c(e,t,r,s,a,n,o){try{var i=e[n](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(s,a)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(s,a){var n=e.apply(t,r);function o(e){c(n,s,a,o,i,"next",e)}function i(e){c(n,s,a,o,i,"throw",e)}o(void 0)}))}}class h extends a.APIWorker{execute(e){var t=this;return l(regeneratorRuntime.mark((function r(){var s,a,u,c,l,h;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e||(e=t.queue.shift()),e){r.next=3;break}return r.abrupt("return");case 3:return u=e.method,r.prev=4,r.next=7,e.make();case 7:c=r.sent,r.next=22;break;case 10:if(r.prev=10,r.t0=r.catch(4),l=t.api.options,e.retries!==l.limit){r.next=17;break}return null==(h=e.captchaValidate)||h.reject(r.t0),e.reject(r.t0),r.abrupt("return");case 17:return e.retries+=1,r.next=20,(0,i.wait)(l.wait);case 20:return t.requeue(e),r.abrupt("return");case 22:if(void 0===c.error){r.next=25;break}return t.handleError(e,new n.APIError(c.error)),r.abrupt("return");case 25:if(null==(s=e.captchaValidate)||s.resolve(),!u.startsWith("execute")){r.next=29;break}return e.resolve({response:c.response,errors:(c.execute_errors||[]).map((e=>new o.ExecuteError(e)))}),r.abrupt("return");case 29:e.resolve(null!=(a=c.response)?a:c);case 30:case"end":return r.stop()}}),r,null,[[4,10]])})))()}handleError(e,t){var r=this;return l(regeneratorRuntime.mark((function a(){var n,o,c,l,h,d,p,v,m,f;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((c=t.code)!==s.API_ERROR_TOO_MANY){a.next=11;break}if(!r.paused){a.next=5;break}return r.requeue(e),a.abrupt("return");case 5:return r.pause(),a.next=8,(0,i.wait)(u.MINIMUM_TIME_INTERVAL_API);case 8:return r.requeue(e),r.resume(),a.abrupt("return");case 11:if(null==(n=e.captchaValidate)||n.reject(t),null==(o=e.tokenRegenerateValidate)||o.reject(t),c!==s.API_ERROR_CAPTCHA||!r.api.hasCaptchaHandler){a.next=31;break}return a.prev=14,l=t.captchaSid,a.next=18,r.api.processingCaptcha({type:u.CaptchaType.API,src:t.captchaImg,sid:l,request:e});case 18:h=a.sent,d=h.key,p=h.validate,e.captchaValidate=p,e.params.captcha_sid=l,e.params.captcha_key=d,r.requeue(e),a.next=30;break;case 27:a.prev=27,a.t0=a.catch(14),e.reject(a.t0);case 30:return a.abrupt("return");case 31:if(c!==s.API_ERROR_AUTH||!r.api.hasTokenRegenerateHandler){a.next=47;break}return a.prev=32,a.next=35,r.api.processingTokenRegenerate();case 35:v=a.sent,m=v.token,f=v.validate,r.api.options.token=m,e.tokenRegenerateValidate=f,r.requeue(e),a.next=46;break;case 43:a.prev=43,a.t1=a.catch(32),e.reject(a.t1);case 46:return a.abrupt("return");case 47:e.reject(t);case 48:case"end":return a.stop()}}),a,null,[[14,27],[32,43]])})))()}}},349805:(e,t,r)=>{"use strict";r.d(t,{APIWorker:()=>n});var s=r(137395),a=r(819169);class n{constructor(e){this.busy=!1,this.paused=!1,this.queue=[],this.api=e,this.intervalPerRequests=Math.ceil(a.MINIMUM_TIME_INTERVAL_API/this.api.options.limit)}enqueue(e){this.queue.push(e),this.immediateHeat()}requeue(e){this.queue.unshift(e),this.immediateHeat()}pause(){this.paused=!0}resume(){this.paused=!1,this.immediateHeat()}heat(){if(!this.paused&&!this.busy&&this.queue.length)switch(this.busy=!0,this.api.options.requestMode){case s.APIRequestMode.SEQUENTIAL:this.execute(),setTimeout((()=>{this.busy=!1,this.immediateHeat()}),this.intervalPerRequests);break;case s.APIRequestMode.BURST:for(var e=Math.min(this.api.options.limit,this.queue.length),t=0;t<e&&0!==this.queue.length;t+=1)this.execute();var r=Math.ceil(a.MINIMUM_TIME_INTERVAL_API-e*this.intervalPerRequests);setTimeout((()=>{this.busy=!1,this.immediateHeat()}),r<=0?a.MINIMUM_TIME_INTERVAL_API:r)}}immediateHeat(){setTimeout((()=>this.heat()))}}}}]);try{stManager.done("dist/2ea1d9a39bf639351c677556afcf4198.951bf31f42e2fc312b83.js")}catch(e){}