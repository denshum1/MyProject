/*! For license information please see fba43c7a1c8ad19aa306e4c66812a52a.f50b883cde2d245ad9be.js.LICENSE.txt */
(self.webpackChunkvk=self.webpackChunkvk||[]).push([[882],{10536:(e,t,r)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},i.apply(this,arguments)}r.d(t,{extends:()=>i})},154289:(e,t,r)=>{"use strict";r.d(t,{useVirtualizer:()=>c});var i=r(10536),n=r(667294),o=r(135432),a="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;function s(e){var t=n.useReducer((function(){return{}}),{})[1],r=(0,i.extends)({},e,{onChange:function(r){t(),null==e.onChange||e.onChange(r)}}),s=n.useState((function(){return new o.Virtualizer(r)}))[0];return s.setOptions(r),n.useEffect((function(){return s._didMount()}),[]),a((function(){return s._willUpdate()})),s}function c(e){return s((0,i.extends)({observeElementRect:o.observeElementRect,observeElementOffset:o.observeElementOffset,scrollToFn:o.elementScroll},e))}},883349:(e,t,r)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},i.apply(this,arguments)}r.d(t,{extends:()=>i})},135432:(e,t,r)=>{"use strict";r.d(t,{Virtualizer:()=>f,defaultRangeExtractor:()=>a,elementScroll:()=>v,observeElementOffset:()=>l,observeElementRect:()=>s,observeWindowOffset:()=>u,observeWindowRect:()=>c,windowScroll:()=>m});var i=r(883349),n=r(496610),o=function(e){return e},a=function(e){for(var t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),i=[],n=t;n<=r;n++)i.push(n);return i},s=function(e,t){var r=e.scrollElement;if(r){var i=function(e){var r=e.width,i=e.height;t({width:Math.round(r),height:Math.round(i)})};i(r.getBoundingClientRect());var n=new ResizeObserver((function(e){var t=e[0];if(null!=t&&t.borderBoxSize){var n=t.borderBoxSize[0];if(n)return void i({width:n.inlineSize,height:n.blockSize})}i(r.getBoundingClientRect())}));return n.observe(r,{box:"border-box"}),function(){n.unobserve(r)}}},c=function(e,t){var r=e.scrollElement;if(r){var i=function(){t({width:r.innerWidth,height:r.innerHeight})};return i(),r.addEventListener("resize",i,{passive:!0}),function(){r.removeEventListener("resize",i)}}},l=function(e,t){var r=e.scrollElement;if(r){var i=function(){t(r[e.options.horizontal?"scrollLeft":"scrollTop"])};return i(),r.addEventListener("scroll",i,{passive:!0}),function(){r.removeEventListener("scroll",i)}}},u=function(e,t){var r=e.scrollElement;if(r){var i=function(){t(r[e.options.horizontal?"scrollX":"scrollY"])};return i(),r.addEventListener("scroll",i,{passive:!0}),function(){r.removeEventListener("scroll",i)}}},d=function(e,t,r){if(null!=t&&t.borderBoxSize){var i=t.borderBoxSize[0];if(i)return Math.round(i[r.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[r.options.horizontal?"width":"height"])},m=function(e,t,r){var i,n,o=t.adjustments,a=void 0===o?0:o,s=t.behavior,c=e+a;null==(i=r.scrollElement)||null==i.scrollTo||i.scrollTo(((n={})[r.options.horizontal?"left":"top"]=c,n.behavior=s,n))},v=function(e,t,r){var i,n,o=t.adjustments,a=void 0===o?0:o,s=t.behavior,c=e+a;null==(i=r.scrollElement)||null==i.scrollTo||i.scrollTo(((n={})[r.options.horizontal?"left":"top"]=c,n.behavior=s,n))},f=function(e){var t,r,s=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(t=null,r=function(){return t||("undefined"!=typeof ResizeObserver?t=new ResizeObserver((function(e){e.forEach((function(e){s._measureElement(e.target,e)}))})):null)},{disconnect:function(){var e;return null==(e=r())?void 0:e.disconnect()},observe:function(e){var t;return null==(t=r())?void 0:t.observe(e,{box:"border-box"})},unobserve:function(e){var t;return null==(t=r())?void 0:t.unobserve(e)}}),this.range={startIndex:0,endIndex:0},this.setOptions=function(e){Object.entries(e).forEach((function(t){var r=t[0];void 0===t[1]&&delete e[r]})),s.options=(0,i.extends)({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:o,rangeExtractor:a,onChange:function(){},measureElement:d,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},e)},this.notify=function(){null==s.options.onChange||s.options.onChange(s)},this.cleanup=function(){s.unsubs.filter(Boolean).forEach((function(e){return e()})),s.unsubs=[],s.scrollElement=null},this._didMount=function(){return s.measureElementCache.forEach(s.observer.observe),function(){s.observer.disconnect(),s.cleanup()}},this._willUpdate=function(){var e=s.options.getScrollElement();s.scrollElement!==e&&(s.cleanup(),s.scrollElement=e,s._scrollToOffset(s.scrollOffset,{adjustments:void 0,behavior:void 0}),s.unsubs.push(s.options.observeElementRect(s,(function(e){var t=s.scrollRect;s.scrollRect=e,(s.options.horizontal?e.width!==t.width:e.height!==t.height)&&s.maybeNotify()}))),s.unsubs.push(s.options.observeElementOffset(s,(function(e){s.scrollAdjustments=0,s.scrollOffset!==e&&(null!==s.isScrollingTimeoutId&&(clearTimeout(s.isScrollingTimeoutId),s.isScrollingTimeoutId=null),s.isScrolling=!0,s.scrollDirection=s.scrollOffset<e?"forward":"backward",s.scrollOffset=e,s.maybeNotify(),s.isScrollingTimeoutId=setTimeout((function(){s.isScrollingTimeoutId=null,s.isScrolling=!1,s.scrollDirection=null,s.maybeNotify()}),s.options.scrollingDelay))}))))},this.getSize=function(){return s.scrollRect[s.options.horizontal?"width":"height"]},this.memoOptions=(0,n.memo)((function(){return[s.options.count,s.options.paddingStart,s.options.scrollMargin,s.options.getItemKey]}),(function(e,t,r,i){return s.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:r,getItemKey:i}}),{key:!1}),this.getFurthestMeasurement=function(e,t){for(var r=new Map,i=new Map,n=t-1;n>=0;n--){var o=e[n];if(!r.has(o.lane)){var a=i.get(o.lane);if(null==a||o.end>a.end?i.set(o.lane,o):o.end<a.end&&r.set(o.lane,!0),r.size===s.options.lanes)break}}return i.size===s.options.lanes?Array.from(i.values()).sort((function(e,t){return e.end-t.end}))[0]:void 0},this.getMeasurements=(0,n.memo)((function(){return[s.memoOptions(),s.itemSizeCache]}),(function(e,t){var r=e.count,i=e.paddingStart,n=e.scrollMargin,o=e.getItemKey,a=s.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,s.pendingMeasuredCacheIndexes):0;s.pendingMeasuredCacheIndexes=[];for(var c=s.measurementsCache.slice(0,a),l=a;l<r;l++){var u=o(l),d=1===s.options.lanes?c[l-1]:s.getFurthestMeasurement(c,l),m=d?d.end:i+n,v=t.get(u),f="number"==typeof v?v:s.options.estimateSize(l),h=m+f,p=d?d.lane:l%s.options.lanes;c[l]={index:l,start:m,size:f,end:h,key:u,lane:p}}return s.measurementsCache=c,c}),{key:!1,debug:function(){return s.options.debug}}),this.calculateRange=(0,n.memo)((function(){return[s.getMeasurements(),s.getSize(),s.scrollOffset]}),(function(e,t,r){return s.range=function(e){var t=e.measurements,r=e.outerSize,i=e.scrollOffset,n=t.length-1,o=h(0,n,(function(e){return t[e].start}),i),a=o;for(;a<n&&t[a].end<i+r;)a++;return{startIndex:o,endIndex:a}}({measurements:e,outerSize:t,scrollOffset:r})}),{key:!1,debug:function(){return s.options.debug}}),this.maybeNotify=(0,n.memo)((function(){var e=s.calculateRange();return[e.startIndex,e.endIndex,s.isScrolling]}),(function(){s.notify()}),{key:!1,debug:function(){return s.options.debug},initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]}),this.getIndexes=(0,n.memo)((function(){return[s.options.rangeExtractor,s.calculateRange(),s.options.overscan,s.options.count]}),(function(e,t,r,n){return e((0,i.extends)({},t,{overscan:r,count:n}))}),{key:!1,debug:function(){return s.options.debug}}),this.indexFromElement=function(e){var t=s.options.indexAttribute,r=e.getAttribute(t);return r?parseInt(r,10):(console.warn("Missing attribute name '"+t+"={index}' on measured element."),-1)},this._measureElement=function(e,t){var r,i=s.indexFromElement(e),n=s.measurementsCache[i];if(n){var o=s.measureElementCache.get(n.key);if(!e.isConnected)return s.observer.unobserve(e),void(e===o&&s.measureElementCache.delete(n.key));o!==e&&(o&&s.observer.unobserve(o),s.observer.observe(e),s.measureElementCache.set(n.key,e));var a=s.options.measureElement(e,t,s),c=a-(null!=(r=s.itemSizeCache.get(n.key))?r:n.size);0!==c&&(n.start<s.scrollOffset&&s._scrollToOffset(s.scrollOffset,{adjustments:s.scrollAdjustments+=c,behavior:void 0}),s.pendingMeasuredCacheIndexes.push(i),s.itemSizeCache=new Map(s.itemSizeCache.set(n.key,a)),s.notify())}},this.measureElement=function(e){e&&s._measureElement(e,void 0)},this.getVirtualItems=(0,n.memo)((function(){return[s.getIndexes(),s.getMeasurements()]}),(function(e,t){for(var r=[],i=0,n=e.length;i<n;i++){var o=t[e[i]];r.push(o)}return r}),{key:!1,debug:function(){return s.options.debug}}),this.getVirtualItemForOffset=function(e){var t=s.getMeasurements();return(0,n.notUndefined)(t[h(0,t.length-1,(function(e){return(0,n.notUndefined)(t[e]).start}),e)])},this.getOffsetForAlignment=function(e,t){var r=s.getSize();"auto"===t&&(t=e<=s.scrollOffset?"start":e>=s.scrollOffset+r?"end":"start"),"start"===t||("end"===t?e-=r:"center"===t&&(e-=r/2));var i=s.options.horizontal?"scrollWidth":"scrollHeight",n=(s.scrollElement?"document"in s.scrollElement?s.scrollElement.document.documentElement[i]:s.scrollElement[i]:0)-s.getSize();return Math.max(Math.min(n,e),0)},this.getOffsetForIndex=function(e,t){void 0===t&&(t="auto"),e=Math.max(0,Math.min(e,s.options.count-1));var r=(0,n.notUndefined)(s.getMeasurements()[e]);if("auto"===t)if(r.end>=s.scrollOffset+s.getSize()-s.options.scrollPaddingEnd)t="end";else{if(!(r.start<=s.scrollOffset+s.options.scrollPaddingStart))return[s.scrollOffset,t];t="start"}var i="end"===t?r.end+s.options.scrollPaddingEnd:r.start-s.options.scrollPaddingStart;return[s.getOffsetForAlignment(i,t),t]},this.isDynamicMode=function(){return s.measureElementCache.size>0},this.cancelScrollToIndex=function(){null!==s.scrollToIndexTimeoutId&&(clearTimeout(s.scrollToIndexTimeoutId),s.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(e,t){var r=void 0===t?{}:t,i=r.align,n=void 0===i?"start":i,o=r.behavior;s.cancelScrollToIndex(),"smooth"===o&&s.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s._scrollToOffset(s.getOffsetForAlignment(e,n),{adjustments:void 0,behavior:o})},this.scrollToIndex=function(e,t){var r=void 0===t?{}:t,i=r.align,o=void 0===i?"auto":i,a=r.behavior;e=Math.max(0,Math.min(e,s.options.count-1)),s.cancelScrollToIndex(),"smooth"===a&&s.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var c=s.getOffsetForIndex(e,o),l=c[0],u=c[1];s._scrollToOffset(l,{adjustments:void 0,behavior:a}),"smooth"!==a&&s.isDynamicMode()&&(s.scrollToIndexTimeoutId=setTimeout((function(){if(s.scrollToIndexTimeoutId=null,s.measureElementCache.has(s.options.getItemKey(e))){var t=s.getOffsetForIndex(e,u)[0];(0,n.approxEqual)(t,s.scrollOffset)||s.scrollToIndex(e,{align:u,behavior:a})}else s.scrollToIndex(e,{align:u,behavior:a})})))},this.scrollBy=function(e,t){var r=(void 0===t?{}:t).behavior;s.cancelScrollToIndex(),"smooth"===r&&s.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s._scrollToOffset(s.scrollOffset+e,{adjustments:void 0,behavior:r})},this.getTotalSize=function(){var e;return((null==(e=s.getMeasurements()[s.options.count-1])?void 0:e.end)||s.options.paddingStart)-s.options.scrollMargin+s.options.paddingEnd},this._scrollToOffset=function(e,t){var r=t.adjustments,i=t.behavior;s.options.scrollToFn(e,{behavior:i,adjustments:r},s)},this.measure=function(){s.itemSizeCache=new Map,s.notify()},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((function(e){s.itemSizeCache.set(e.key,e.size)})),this.maybeNotify()},h=function(e,t,r,i){for(;e<=t;){var n=(e+t)/2|0,o=r(n);if(o<i)e=n+1;else{if(!(o>i))return n;t=n-1}}return e>0?e-1:0}},496610:(e,t,r)=>{"use strict";function i(e,t,r){var i,n,o=null!=(i=r.initialDeps)?i:[];return function(){var i;r.key&&null!=r.debug&&r.debug()&&(i=Date.now());var a,s=e();if(!(s.length!==o.length||s.some((function(e,t){return o[t]!==e}))))return n;if(o=s,r.key&&null!=r.debug&&r.debug()&&(a=Date.now()),n=t.apply(void 0,s),r.key&&null!=r.debug&&r.debug()){var c=Math.round(100*(Date.now()-i))/100,l=Math.round(100*(Date.now()-a))/100,u=l/16,d=function(e,t){for(e=String(e);e.length<t;)e=" "+e;return e};console.info("%c⏱ "+d(l,5)+" /"+d(c,5)+" ms","\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl("+Math.max(0,Math.min(120-120*u,120))+"deg 100% 31%);",null==r?void 0:r.key)}return null==r||null==r.onChange||r.onChange(n),n}}function n(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?": "+t:""));return e}r.d(t,{approxEqual:()=>o,memo:()=>i,notUndefined:()=>n});var o=function(e,t){return Math.abs(e-t)<1}},180271:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24VmojiOutline","vmoji_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="vmoji_outline_24"><path d="M9.998 2.9a.9.9 0 0 1-.9.9A5.306 5.306 0 0 0 3.8 9.107.9.9 0 0 1 2 9.1C2.005 5.185 5.18 2 9.098 2a.9.9 0 0 1 .9.9ZM8.5 9.549a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm5.956.754c.872-.445 1.878-.445 2.764.308a.766.766 0 0 1 .063 1.125.88.88 0 0 1-1.192.06l-.085-.066c-.252-.177-.477-.163-.748-.025a.977.977 0 0 0-.149.09l-.083.063a.881.881 0 0 1-1.11-.122.766.766 0 0 1 .063-1.125c.106-.09.266-.2.477-.309Zm-.1 4.692c.1-.543-.354-.995-.906-.995h-2.9c-.552 0-1.006.451-.906.995.026.138.057.26.093.347a2.442 2.442 0 0 0 1.325 1.322c.298.123.616.188.938.188a2.457 2.457 0 0 0 2.264-1.51 1.84 1.84 0 0 0 .092-.347ZM2 14.901a.9.9 0 0 1 1.8-.008A5.306 5.306 0 0 0 9.098 20.2a.9.9 0 1 1 0 1.8C5.178 22 2.005 18.815 2 14.901ZM14.002 2.9a.9.9 0 0 0 .9.9A5.306 5.306 0 0 1 20.2 9.107a.9.9 0 0 0 .9.892.91.91 0 0 0 .9-.9C21.995 5.185 18.821 2 14.902 2a.9.9 0 0 0-.9.9ZM21.1 14.001a.9.9 0 0 0-.9.892 5.306 5.306 0 0 1-5.298 5.307.9.9 0 1 0 0 1.8c3.92 0 7.093-3.185 7.098-7.099 0-.49-.41-.9-.9-.9Z" /></symbol>',24,24,!1,void 0)},641308:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon12CheckCircleFill","check_circle_fill_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="check_circle_fill_12"><path fill="#99a2ad" d="M6 12A6 6 0 1 0 6 0a6 6 0 0 0 0 12z" /><path fill="#fff" fill-rule="evenodd" d="M8.78 3.97a.75.75 0 0 1 0 1.06L5.53 8.28a.75.75 0 0 1-1.06 0L3.22 7.03a.75.75 0 0 1 1.06-1.06l.72.72 2.72-2.72a.75.75 0 0 1 1.06 0z" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},975803:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon16ChevronOutline","chevron_outline_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M4.22 3.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06L7.69 8 4.22 4.53a.75.75 0 0 1 0-1.06z" clip-rule="evenodd" /></symbol>',12,16,!1,void 0)},31221:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon20BrushOutline","brush_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="brush_outline_20"><path fill-rule="evenodd" d="M6.667 12.493c-1.006 0-1.77.77-1.814 1.726-.064 1.352-.707 2.16-1.285 2.65.528.155 1.268.213 2.226-.072 1.903-.567 2.687-1.724 2.687-2.613 0-.897-.775-1.69-1.814-1.69ZM3.36 14.148a3.295 3.295 0 0 1 3.308-3.156c1.791 0 3.31 1.392 3.31 3.192 0 1.806-1.499 3.38-3.758 4.052-2.157.642-3.64-.025-4.348-.548a.921.921 0 0 1-.293-.353.839.839 0 0 1-.036-.614c.15-.46.637-.658.987-.938.382-.305.789-.761.83-1.635ZM15.702 2.001a1.608 1.608 0 0 1 2.261-.07 1.69 1.69 0 0 1 .17 2.287l-6.08 7.498a.746.746 0 0 1-1.052.108.753.753 0 0 1-.108-1.056l6.074-7.491a.185.185 0 0 0-.017-.242c-.067-.061-.133-.026-.202.04L9.745 9.783a.746.746 0 0 1-1.057-.025.753.753 0 0 1 .025-1.061L15.702 2Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},961943:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon20GearOutline","gear_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="gear_outline_20"><path fill-rule="evenodd" d="m7.222 3.378.01-.033a4.147 4.147 0 0 1 .17-.476c.358-.821.944-1.285 1.854-1.36l.166-.009h1.208c1.051.033 1.735.608 2.095 1.692l.057.186.044.166c.016.064.037.132.06.203l.05.137.03.015.06-.02.116-.044.135-.059a5.36 5.36 0 0 1 .168-.074l.036-.015a4.23 4.23 0 0 1 .424-.15c.932-.27 1.685-.075 2.32.618l.108.125.714.88c.636.833.617 1.723-.004 2.683l-.109.161-.102.139c-.04.054-.082.113-.123.177l-.062.1-.029.05.004.017.08.052.11.066.133.072c1.209.614 1.707 1.42 1.515 2.541l-.032.162-.213.916c-.137.593-.245.873-.67 1.258a2.135 2.135 0 0 1-1.059.518l-.01.003a3.917 3.917 0 0 1-.438.059l-.191.012-.173.006-.052.001h-.006c-.05.002-.102.006-.156.01l-.158.02.012.123.011.083.029.154c.068.322.101.618.098.89v.012c-.015.84-.38 1.45-1.132 1.87l-.147.076-1.023.494c-.901.403-1.722.234-2.484-.467a3.934 3.934 0 0 1-.144-.14l-.133-.142-.113-.13a2.938 2.938 0 0 0-.147-.161l-.085-.083-.043-.04-.08.076-.091.093-.103.115c-.828.981-1.703 1.334-2.763.923l-.153-.063-.915-.443-.271-.138c-.415-.225-.647-.44-.874-.918a2.153 2.153 0 0 1-.209-1.01v-.016c.006-.19.03-.388.07-.603l.038-.195.001-.004c.014-.064.025-.133.035-.206l.016-.148-.003-.003-.09-.012-.128-.012-.151-.006a4.145 4.145 0 0 1-.862-.098l-.012-.003c-.837-.198-1.363-.69-1.608-1.524l-.043-.16-.254-1.102c-.204-1.026.205-1.818 1.186-2.41l.17-.098.152-.08c.06-.03.123-.065.188-.105l.134-.087.004-.017-.055-.093-.07-.108-.089-.124a5.194 5.194 0 0 1-.286-.423c-.54-.905-.534-1.72.046-2.523l.1-.132.717-.877c.687-.792 1.566-.958 2.64-.554l.18.072.158.07a2.9 2.9 0 0 0 .193.08l.118.042.032-.014.029-.077.04-.12.04-.143c.013-.056.028-.112.044-.166Zm4.24.841.013.038.05.138a1.5 1.5 0 0 0 .743.833l.03.014a1.5 1.5 0 0 0 1.136.082l.06-.02a1.47 1.47 0 0 0 .065-.023l.117-.044.062-.025.135-.059.035-.015a2.698 2.698 0 0 1 .415-.16c.268-.078.407-.06.47-.043.057.015.16.056.314.22l.077.09.682.84c.138.185.15.295.15.359 0 .084-.03.267-.225.573l-.082.122-.08.108a4.406 4.406 0 0 0-.18.26l-.014.022-.062.099-.008.013-.01.018-.03.05a1.5 1.5 0 0 0-.178 1.056l.004.017a1.5 1.5 0 0 0 .648.959l.08.052.05.032.11.066.06.034.133.072.034.018c.456.231.62.421.676.516.036.06.084.162.042.417l-.023.117-.207.892c-.066.285-.095.35-.105.369 0 0 0 .003-.01.013a.974.974 0 0 1-.101.103c-.082.074-.166.124-.354.161a2.357 2.357 0 0 1-.257.035l-.153.01-.138.004-.071.002a4.554 4.554 0 0 0-.28.02l-.158.019a1.5 1.5 0 0 0-1.318 1.628l.011.123.008.07.012.083.01.06.028.154.008.045c.05.236.068.419.066.557-.003.206-.046.301-.073.348-.028.046-.094.131-.276.235l-.105.056-.977.471c-.204.088-.317.082-.382.07-.076-.015-.228-.068-.456-.279a2.382 2.382 0 0 1-.08-.076l-.1-.107-.088-.102a4.389 4.389 0 0 0-.217-.236l-.018-.018-.084-.082a1.433 1.433 0 0 0-.036-.034l-.043-.04a1.5 1.5 0 0 0-2.047.014l-.08.075a1.43 1.43 0 0 0-.042.041l-.09.094a1.534 1.534 0 0 0-.048.05l-.103.116-.025.03c-.315.371-.532.495-.646.535-.073.025-.183.05-.415-.038l-.094-.039-.864-.418-.238-.12a1.186 1.186 0 0 1-.13-.083l-.004-.003-.003-.003a1.077 1.077 0 0 1-.083-.147.666.666 0 0 1-.063-.34c.003-.09.015-.207.043-.365l.035-.174a4.384 4.384 0 0 0 .058-.35l.016-.149a1.5 1.5 0 0 0-.434-1.224l-.004-.003a1.5 1.5 0 0 0-.86-.423l-.09-.012a1.405 1.405 0 0 0-.064-.008l-.128-.01a1.539 1.539 0 0 0-.068-.005l-.15-.007-.04-.001a2.663 2.663 0 0 1-.549-.06c-.215-.05-.305-.115-.346-.154-.04-.038-.109-.12-.17-.319l-.03-.114-.242-1.052c-.042-.224-.006-.329.023-.387.038-.076.146-.23.459-.42l.128-.074.119-.063a4.431 4.431 0 0 0 .316-.179l.134-.087a1.5 1.5 0 0 0 .65-.947l.004-.017a1.5 1.5 0 0 0-.171-1.066l-.055-.093a1.49 1.49 0 0 0-.037-.062l-.07-.108a1.496 1.496 0 0 0-.04-.057l-.088-.124a1.516 1.516 0 0 0-.024-.031c-.307-.406-.369-.647-.378-.754-.006-.067-.004-.18.148-.395l.072-.094.684-.838c.154-.173.262-.211.33-.225.09-.018.28-.027.623.1l.138.055.123.055a4.42 4.42 0 0 0 .316.13l.118.042a1.5 1.5 0 0 0 1.134-.058l.031-.015a1.5 1.5 0 0 0 .764-.823l.03-.077.023-.066.04-.12.02-.065.04-.143.01-.037.03-.119c.037-.128.076-.235.114-.323.1-.23.192-.319.243-.357.044-.033.134-.086.343-.105l.1-.006h1.14c.234.01.333.071.386.114.067.056.192.195.308.538l.043.14.034.129c.026.1.056.2.088.298ZM10 11.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm0 1.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},986536:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon20GiftOutline","gift_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="gift_outline_20"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><path fill="currentColor" fill-rule="nonzero" d="M14.846 2.314c1.026 1.026 1.23 2.875-.257 4.186h.911a3 3 0 0 1 3 3v.49c0 .827-.093 1.16-.267 1.487-.174.326-.43.582-.756.756a1.88 1.88 0 0 1-.477.182v1.618c0 1.56-.162 2.126-.467 2.696a3.18 3.18 0 0 1-1.324 1.324l-.202.101c-.48.224-1.037.349-2.229.364l-5.291.002c-1.56 0-2.126-.162-2.696-.467a3.18 3.18 0 0 1-1.324-1.324l-.101-.202c-.224-.48-.349-1.037-.364-2.229L3 12.415a1.88 1.88 0 0 1-.477-.182 1.817 1.817 0 0 1-.756-.756c-.16-.299-.251-.605-.265-1.29L1.5 9.5a3 3 0 0 1 3-3h.911c-1.487-1.31-1.283-3.16-.257-4.186C6.369 1.099 8.738 1.038 10 3.569c1.262-2.531 3.631-2.47 4.846-1.255ZM9.25 12.499 4.5 12.5l.001 1.762.009.399c.021.604.083.924.202 1.2l.078.161c.165.309.399.543.708.708l.162.078c.33.143.724.203 1.598.211l1.991-.001v-4.519Zm6.251.001-4.751-.001v4.519l1.993.001.399-.009c.604-.021.924-.083 1.2-.202l.161-.078a1.68 1.68 0 0 0 .708-.708c.186-.348.267-.688.286-1.551l.004-.438V12.5ZM9.159 7.999 4.5 8A1.5 1.5 0 0 0 3 9.5v.638l.007.232c.012.227.037.315.083.4a.319.319 0 0 0 .14.14c.11.059.223.085.632.09l5.387-.001.002-3L9.16 8l-.001-.001ZM15.5 8l-4.661-.001h-.09v3h5.39c.408-.004.521-.03.63-.089a.319.319 0 0 0 .141-.14c.065-.122.09-.248.09-.78V9.5A1.5 1.5 0 0 0 15.5 8ZM9.223 6.159c-.43-3.101-1.96-3.834-3.009-2.785C5.165 4.424 5.898 5.952 9 6.384l.257.032Zm1.554 0-.024.191.007.062.241-.029c3.101-.43 3.834-1.96 2.785-3.009-1.05-1.049-2.578-.316-3.01 2.785Z" /></g></symbol>',20,20,!1,void 0)},823347:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24FavoriteOutline","favorite_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="favorite_outline_24"><path fill-rule="evenodd" d="M12.554 4.694a.6.6 0 0 0-1.108 0l-1.614 3.9a.9.9 0 0 1-.774.554l-4.125.266a.6.6 0 0 0-.357 1.05l3.267 2.859a.9.9 0 0 1 .282.888l-.93 3.852a.6.6 0 0 0 .883.66l3.472-2.003a.9.9 0 0 1 .9 0l3.472 2.004a.6.6 0 0 0 .883-.661l-.93-3.852a.9.9 0 0 1 .282-.888l3.267-2.858a.6.6 0 0 0-.357-1.05l-4.125-.267a.9.9 0 0 1-.774-.554l-1.614-3.9Zm-2.772-.689c.818-1.976 3.618-1.976 4.436 0l1.4 3.383 3.565.23c2.136.138 3.037 2.792 1.426 4.201l-2.856 2.5.802 3.322c.494 2.05-1.706 3.696-3.533 2.642L12 18.539l-3.022 1.744C7.15 21.337 4.95 19.69 5.445 17.64l.802-3.322-2.856-2.5c-1.611-1.41-.71-4.063 1.426-4.201l3.566-.23 1.4-3.383Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},94566:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24RecentOutline","recent_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="recent_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M12 21.428A9.428 9.428 0 0 1 2.571 12 9.428 9.428 0 0 1 12 2.57c5.206 0 9.429 4.221 9.429 9.429 0 5.207-4.223 9.428-9.429 9.428Zm0-1.8a7.63 7.63 0 1 0-.001-15.258A7.63 7.63 0 0 0 12 19.628Zm4.085-6.387a.9.9 0 1 1-.575 1.706l-4.226-1.427a.9.9 0 0 1-.613-.853V8.353a.9.9 0 1 1 1.8 0v3.668l3.614 1.22Z" /></g></symbol>',24,24,!1,void 0)},147650:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24SmileOutline","smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="smile_outline_24"><path d="M8.438 14.297a.9.9 0 0 1 1.259.133c.013.016.196.223.53.432.383.24.97.488 1.773.488a3.3 3.3 0 0 0 1.773-.488c.191-.12.382-.26.53-.432a.9.9 0 0 1 1.4 1.132 4.045 4.045 0 0 1-.976.826A5.094 5.094 0 0 1 12 17.15a5.094 5.094 0 0 1-2.727-.762 3.987 3.987 0 0 1-.976-.826.9.9 0 0 1 .14-1.265Zm1.812-4.047a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM15 11.5A1.25 1.25 0 1 0 15 9a1.25 1.25 0 0 0 0 2.5Zm-3-9.4c-5.468 0-9.9 4.432-9.9 9.9s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9-4.432-9.9-9.9-9.9ZM3.9 12a8.1 8.1 0 1 1 16.2 0 8.1 8.1 0 0 1-16.2 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},393657:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24StickerSmileOutline","sticker_smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="sticker_smile_outline_24"><path d="M11.295 10.25a1.256 1.256 0 0 1-1.255 1.251c-.69 0-1.248-.56-1.245-1.25C8.798 9.56 9.36 9 10.05 9s1.248.56 1.245 1.25Zm4.244.251c.69 0 1.25-.56 1.254-1.25A1.244 1.244 0 0 0 15.549 8c-.69 0-1.251.56-1.254 1.25a1.244 1.244 0 0 0 1.244 1.251Z" /><path fill-rule="evenodd" d="m11.452 21.295-.005-.025-.399.056c-.845.12-1.406.198-1.906.167a4.886 4.886 0 0 1-4.296-3.245c-.167-.472-.244-1.033-.361-1.879l-.662-4.784c-.149-1.076-.268-1.939-.308-2.644-.04-.724-.003-1.361.208-1.972a4.916 4.916 0 0 1 1.828-2.42c.53-.37 1.132-.58 1.84-.74.689-.155 1.55-.276 2.627-.427l5.096-.717c.783-.11 1.302-.183 1.765-.16a4.885 4.885 0 0 1 4.394 3.317c.148.44.22.96.328 1.742l.02.142h.002l.247 1.655c.024.163.034.324.031.483.082.726.117 1.292.09 1.816a9.93 9.93 0 0 1-6.718 8.896c-.765.26-1.666.407-3.1.612l-.721.127Zm5.336-16.992c-.27-.013-.607.03-1.53.16l-4.954.696c-1.124.158-1.914.27-2.522.407-.599.135-.945.278-1.202.458a3.11 3.11 0 0 0-1.156 1.53c-.103.298-.146.67-.112 1.282.035.623.143 1.413.299 2.537l.64 4.635c.139.996.194 1.36.291 1.635a3.09 3.09 0 0 0 2.718 2.053c.292.018.656-.028 1.652-.168l.17-.024.82-.116 1.603-.283c.6-.106 1-.68.893-1.28l-.236-1.324c-1.403.152-3.005.008-4.27-.857a.9.9 0 0 1 1.017-1.487c.817.559 2.008.694 3.23.534a4.413 4.413 0 0 1 3.43-3.475l1.655-.345c.48-.1.824-.499.872-.965a99.95 99.95 0 0 0-.263-1.989c-.128-.922-.178-1.258-.265-1.515a3.09 3.09 0 0 0-2.78-2.1Zm-.576 13.853a8.128 8.128 0 0 0 3.885-5.677 2.903 2.903 0 0 1-.51.155l-1.655.345a2.606 2.606 0 0 0-2.034 3.008l.271 1.52c.04.218.053.436.043.649Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},569456:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24StorefrontOutline","storefront_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="storefront_outline_24"><path fill-rule="evenodd" d="M7 14a.9.9 0 0 1 .9.9v4.2h8.2v-4.2a.9.9 0 0 1 1.8 0V20a.9.9 0 0 1-.9.9H7a.9.9 0 0 1-.9-.9v-5.1A.9.9 0 0 1 7 14Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M3 20a.9.9 0 0 1 .9-.9h16.2a.9.9 0 1 1 0 1.8H3.9A.9.9 0 0 1 3 20Zm13.9-10a1.1 1.1 0 0 0 2.2 0h1.8a2.9 2.9 0 0 1-5.8 0h1.8Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M16 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M4 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 0 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8.703 3.1h6.594c.553 0 1.019-.001 1.453.137a2.9 2.9 0 0 1 1.033.585c.342.301.581.7.865 1.175l.056.094 1.612 2.686.027.045c.143.239.264.44.352.66.077.195.133.397.167.604.038.234.038.47.038.747V10h-1.8v-.114c0-.358-.003-.438-.014-.51a1.1 1.1 0 0 0-.064-.228c-.027-.068-.066-.138-.25-.445L17.16 6.017c-.37-.618-.462-.752-.566-.843a1.1 1.1 0 0 0-.392-.222c-.131-.042-.294-.052-1.014-.052H8.812c-.72 0-.883.01-1.014.052a1.1 1.1 0 0 0-.392.222c-.104.091-.196.225-.566.843L5.228 8.703c-.185.307-.223.377-.25.445a1.1 1.1 0 0 0-.064.228c-.011.072-.014.152-.014.51V10H3.1v-.167c0-.278 0-.513.038-.747a2.9 2.9 0 0 1 .167-.603c.088-.22.209-.422.352-.66l.027-.046L5.296 5.09l.056-.094c.284-.474.523-.874.865-1.175a2.9 2.9 0 0 1 1.033-.585c.434-.138.9-.138 1.453-.137Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},256116:(e,t,r)=>{"use strict";r.d(t,{APIProvider:()=>s});r(682772),r(319601);var i=r(785893),n=r(667294),o=r(194182),a=r(928525);function s(e){var t=e.userId,r=e.onAPIRequest,s=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["userId","onAPIRequest"]),c=(0,n.useState)(new a.API({userId:t,onAPIRequest:r})),l=c[0],u=c[1];return(0,n.useEffect)((()=>{var e=new a.API({userId:t,onAPIRequest:r});return u(e),e.cache.reload(),()=>{e.cache.destroy()}}),[t,r]),(0,i.jsx)(o.APIContext.Provider,Object.assign({value:l},s),void 0)}},611982:(e,t,r)=>{"use strict";r.d(t,{Emoji:()=>s});r(682772),r(319601);var i=r(785893),n=r(659397),o=r(358456),a=r(876863);function s(e){var t=e.emoji,r=e.className,s=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["emoji","className"]);return(0,i.jsx)("i",Object.assign({className:(0,n.classNames)(a.default.emoji,`@${(0,o.unicodeToByteHex)(t)}`,r),"data-emoji":t},s),void 0)}},43124:(e,t,r)=>{"use strict";r.d(t,{EmojiItem:()=>s});r(682772),r(319601);var i=r(785893),n=r(659397),o=r(611982),a=r(774319);function s(e){var t=e.emoji,r=e.active,s=e.onEmojiClick,c=e.className,l=e.onClick,u=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["emoji","active","onEmojiClick","className","onClick"]);return(0,i.jsx)("div",Object.assign({className:(0,n.classNames)(c,a.default.item,{[a.default.itemActive]:r}),onClick:e=>{null==l||l(e),null==s||s(t)}},u,{children:(0,i.jsx)(o.Emoji,{emoji:t},void 0)}),void 0)}},691834:(e,t,r)=>{"use strict";r.d(t,{EmojiKeyboard:()=>k});r(226699),r(682772),r(66992),r(821249),r(702707),r(319601),r(241539),r(426833),r(470189),r(132023),r(454747),r(333948);var i,n,o=r(785893),a=r(86894),s=r(659397),c=r(135432),l=r(154289),u=r(667294),d=r(705361),m=r(543730),v=r(454195),f=r(364759),h=r(933712);function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},p.apply(this,arguments)}!function(e){e.ROW="row",e.HEADER="header"}(i||(i={})),function(e){e.ENTER="Enter",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight"}(n||(n={}));var b=Object.values(n);function k(e){var t=e.isVisible,r=e.className,k=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["isVisible","className"]),g=(0,f.useEmojiKeyboard)(),E=g.emojiCountPerRow,I=g.emojiSections,S=g.emojiPadding,_=g.insertEmoji,y=g.selectedEmoji,j=g.setSelectedEmoji,w=(0,u.useRef)(null),x=(0,u.useRef)(0),O=(0,u.useMemo)((()=>{var e=[];return I.forEach(((t,r)=>{var n=t[0],a=t[1];e.push({type:i.HEADER,element:(0,o.jsx)(v.EmojiKeyboardHeader,{title:n},n)}),(0,s.chunkArray)(a,E).forEach(((t,a)=>{e.push({type:i.ROW,element:(0,o.jsx)(d.EmojiKeyboardRow,{"data-section-index":r,"data-row-index":a,emoji:t,onEmojiClick:_},`${n}${t[0]}`)})}))})),e}),[I,E]),C=(0,u.useMemo)((()=>O.reduce(((e,t,r)=>(t.type===i.HEADER&&e.push(r),e)),[])),[O]),R=e=>C.includes(e),T=e=>x.current===e,A=(0,u.useCallback)((e=>(x.current=[...C].reverse().find((t=>e.startIndex>=t))||0,[...new Set([x.current,...(0,c.defaultRangeExtractor)(e)])].sort(((e,t)=>e-t)))),[C]),N=(0,l.useVirtualizer)({overscan:5,rangeExtractor:A,count:O.length,getScrollElement:()=>w.current,estimateSize:()=>m.EMOJI_SIZE}),P=(null==y?void 0:y.emojiIndex)||0,K=(null==y?void 0:y.sectionIndex)||0,M=Math.floor(P/E),V=(e,t)=>{var r=C[K]+M;N.scrollToIndex(r,{align:"center",behavior:"auto"}),j({sectionIndex:e,emojiIndex:t})};return(0,u.useEffect)((()=>{if(t){var e=e=>{var t=e.key,r=y;if(b.includes(t))if((e=>{e.preventDefault(),e.stopPropagation()})(e),r)switch(t){case n.ENTER:var i;if(!y)return;var o=y.sectionIndex,a=y.emojiIndex,s=null==(i=I[o])?void 0:i[1][a];return void(s&&_(s));case n.ARROW_UP:if(!y)return;if(Number(r.emojiIndex)>=E)return void V(r.sectionIndex,r.emojiIndex-E);if(r.sectionIndex){var c,l=(null==(c=I[r.sectionIndex-1])?void 0:c[1].length)||0;if(l){var u=r.emojiIndex%E,d=l-1,m=d%E,v=d-d%E+Math.min(u,m);V(r.sectionIndex-1,v)}}return;case n.ARROW_DOWN:var f,h=(null==(f=I[r.sectionIndex])?void 0:f[1].length)||0;return r.emojiIndex-r.emojiIndex%E!=h-1-(h-1)%E?void V(r.sectionIndex,Math.min(r.emojiIndex+E,h-1)):void(r.sectionIndex!==I.length-1&&V(r.sectionIndex+1,r.emojiIndex%E));case n.ARROW_LEFT:if(r.emojiIndex)return void V(r.sectionIndex,r.emojiIndex-1);if(r.sectionIndex){var p,k=(null==(p=I[r.sectionIndex-1])?void 0:p[1].length)||0;k&&V(r.sectionIndex-1,k-1)}return;case n.ARROW_RIGHT:var g,S=(null==(g=I[r.sectionIndex])?void 0:g[1].length)||0;return r.emojiIndex!==S-1?void V(r.sectionIndex,r.emojiIndex+1):void(r.sectionIndex!==I.length-1&&V(r.sectionIndex+1,0))}else V(0,0)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}}),[t,y,I]),(0,o.jsx)("div",Object.assign({className:(0,s.classNames)(h.default.keyboard,r),style:{"--emoji-size":`${m.EMOJI_SIZE}px`,"--emoji-padding":`${S}px`}},k,{children:(0,o.jsx)(a.CustomScrollView,Object.assign({boxRef:w,className:h.default.scroll,autoHideScrollbar:!0},{children:(0,o.jsx)("div",Object.assign({className:h.default.in,style:{height:N.getTotalSize()}},{children:O.length?N.getVirtualItems().map((e=>{var t=e.key,r=e.index,i=e.start;return(0,o.jsx)("div",Object.assign({"data-index":r,ref:N.measureElement,className:(0,s.classNames)(h.default.item,{[h.default.itemHeader]:R(r)}),style:p({},T(r)?{position:"sticky"}:{position:"absolute",transform:`translateY(${i}px)`})},{children:O[r].element}),t)})):void 0}),void 0)}),void 0)}),void 0)}},454195:(e,t,r)=>{"use strict";r.d(t,{EmojiKeyboardHeader:()=>u});r(682772),r(319601);var i=r(785893),n=r(86894),o=r(659397),a=r(393930),s=r(127927),c=r(899031);var l={[s.StickerEmojiKeyboardVariant.WIDE]:c.default.headerWide,[s.StickerEmojiKeyboardVariant.COMPACT]:c.default.headerCompact,[s.StickerEmojiKeyboardVariant.REGULAR]:c.default.headerRegular};function u(e){var t=e.title,r=e.className,u=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["title","className"]),d=(0,a.useLang)().translate,m=(0,s.useStickersEmojiKeyboard)().variant;return(0,i.jsx)("div",Object.assign({className:(0,o.classNames)(c.default.header,l[m],r)},u,{children:(0,i.jsx)(n.Subhead,Object.assign({className:c.default.title,weight:"3"},{children:d(t)}),void 0)}),void 0)}},543730:(e,t,r)=>{"use strict";r.d(t,{EMOJI_SIZE:()=>d,EmojiKeyboardProvider:()=>f});r(57327),r(682772),r(821249),r(702707),r(319601),r(569720),r(535666);var i=r(785893),n=r(667294),o=r(567793),a=r(194182),s=r(364759),c=r(127927);function l(e,t,r,i,n,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(i,n)}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u.apply(this,arguments)}var d=16,m={[c.StickerEmojiKeyboardVariant.WIDE]:9,[c.StickerEmojiKeyboardVariant.COMPACT]:8,[c.StickerEmojiKeyboardVariant.REGULAR]:12},v={[c.StickerEmojiKeyboardVariant.WIDE]:15,[c.StickerEmojiKeyboardVariant.COMPACT]:11,[c.StickerEmojiKeyboardVariant.REGULAR]:11};function f(e){var t=e.onEmojiInsert,r=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["onEmojiInsert"]),d=(0,a.useAPI)(),f=(0,c.useStickersEmojiKeyboard)(),h=f.variant,p=f.isVisible,b=e=>e?e.sort(((e,t)=>{var r=e[1];return t[1]-r})).map((e=>e[0])):[],k=(0,n.useState)(),g=k[0],E=k[1],I=(0,n.useState)(Object.entries(u({stickers_picker_recently_used:b(d.cache.recentEmoji)},o.sections))),S=I[0],_=I[1],y=S.filter((e=>e[1].length)),j=(0,n.useState)([]),w=j[0],x=j[1],O=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.cache.recentEmoji){e.next=3;break}return e.abrupt("return");case 3:x(t),_((e=>(e[0][1]=b(t),e)));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){l(o,i,n,a,s,"next",e)}function s(e){l(o,i,n,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,n.useEffect)((()=>{p||(O(),E(void 0))}),[d,p]);var C=v[h],R=m[h];return(0,i.jsx)(s.EmojiKeyboardContext.Provider,Object.assign({value:{emojiPadding:R,emojiCountPerRow:C,selectedEmoji:g,setSelectedEmoji:E,emojiSections:y,recentEmoji:w,setRecentEmoji:x,onEmojiInsert:t}},r),void 0)}},567793:(e,t,r)=>{"use strict";r.d(t,{sections:()=>i});var i={stickers_picker_emotions:["😀","😃","😄","😁","😅","😆","😂","🤣","😉","😊","☺","🙂","🙃","😇","😗","😙","😚","😘","😍","🥰","🤩","🤗","😋","😜","🤪","😛","😝","🤑","🤭","🤐","🤫","😶","🤔","🤨","🧐","😐","😑","🙄","😬","🤥","😏","😌","🤤","😴","🤓","😎","🥳","🤠","😒","😔","😪","😕","😟","🙁","☹","😮","😯","😲","😳","🥺","😦","😧","😨","😰","😥","😢","😭","😱","😖","😣","😞","😓","😩","😫","😷","🤒","🤕","🤢","🤮","🤧","🥶","🥵","🥴","😵","🤯","😤","😠","😡","🤬","😈","👿","💀","☠","💩","🤡","👹","👺","👻","👽","👾","🤖","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🙈","🙉","🙊","🦠"],stickers_picker_gestures_and_people:["👍","👎","👌","✌","🤞","🤟","🤘","🤙","🖕","✊","👊","🤛","🤜","👈","👉","👆","👇","☝","👋","🤚","🖐","✋","🖖","👏","🙌","👐","🤲","🤝","🙏","💪","🦵","🦶","👂","👃","🧠","🦷","🦴","👀","👁","👅","👄","✍","💅","🤳","👫","👭","👬","👩‍❤️‍💋‍👨","👨‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩‍❤️‍👨","👨‍❤️‍👨","👩‍❤️‍👩","👪","👶","🧒","👦","👧","🧑","👱","👨","🧔","👱‍♂️","👨‍🦰","👨‍🦱","👨‍🦳","👨‍🦲","👩","👱‍♀️","👩‍🦰","👩‍🦱","👩‍🦳","👩‍🦲","🧓️","🙍‍♂️️","🙍‍♀️️","🙎‍♂️","🙎‍♀️️","🙅‍♂️","🙅‍♀️","🙆‍♂️","🙆‍♀️","💁‍♂️","💁‍♀️️","🙋‍♂️","🙋‍♀️️","🙇‍♂️","🙇‍♀️️","🤦‍♂️","🤦‍♀️","🤷‍♂️","🤷‍♀️","💆‍♂️️","💆‍♀️","💇‍♂️️","💇‍♀️","🚶‍♂️️","🚶‍♀️️","🏃‍♂️️","🏃‍♀️","💃","🕺","🕴️","👯‍♂️️","👯‍♀️","🧖‍♂️","🧖‍♀️️","👼","🎅","🤶","🦸‍♂️","🦸‍♀️","🦹‍♂️","🦹‍♀️","🧙‍♂️","🧙‍♀️","🧚‍♂️","🧚‍♀️","🧛‍♂️","🧛‍♀️","🧜‍♂️","🧜‍♀️","🧝‍♂️","🧝‍♀️","🧞‍♂️","🧞‍♀️","🧟‍♂️","🧟‍♀️","👨‍⚕️","👩‍⚕️","👨‍🎓","👩‍🎓","👨‍🏫","👩‍🏫","👨‍⚖️","👩‍⚖️","👨‍🌾","👩‍🌾","👨‍🍳","👩‍🍳","👨‍🔧","👩‍🔧","👨‍🏭","👩‍🏭","👨‍💼","👩‍💼","👨‍🔬","👩‍🔬","👨‍💻","👩‍💻","👨‍🎤","👩‍🎤","👨‍🎨","👩‍🎨","👨‍✈️","👩‍✈️","👨‍🚀","👩‍🚀","👨‍🚒","👩‍🚒","👮‍♂️","👮‍♀️","🕵️‍♂️","🕵️‍♀️","💂‍♂️","💂‍♀️","👷‍♂️","👷‍♀️","🤴","👸","👳‍♂️","👳‍♀️","👲","🧕","🤵","👰","🤰","🤱","🛀","🛌"],stickers_picker_symbols:["💋","❤","💔","❣","💘","💝","💖","💗","💓","💞","💕","💟","💜","🧡","💛","💚","💙","🖤","💯","💢","💥","💫","🕳","💣","💬","👁️‍🗨️","🗨","🗯","💭","💤","🗣","👤","👥","👣","🔇","🔊","📢","📣","🔔","🔕","🎼","🎵","🎶","⚠","🚸","☢","☣","🆚","🆓","🆕","🚮","🚾","🚭","✅","♻","⚕","🔱","‼","⁉","❓","❗","🆘","⛔","🚫","🚳","🚯","🚱","🚷","📵","🔞"],stickers_picker_animals_and_plants:["🐵","🐒","🦍","🐶","🐕","🐩","🐺","🦊","🦝","🐱","🐈","🦁","🐯","🐅","🐆","🐴","🐎","🦄","🦓","🦌","🐮","🐂","🐃","🐄","🐷","🐽","🐖","🐗","🐏","🐑","🐐","🐪","🐫","🦙","🦒","🐘","🦏","🦛","🐭","🐁","🐀","🐹","🐰","🐇","🐿","🦔","🦇","🐻","🐨","🐼","🦘","🦡","🐾","🦃","🐔","🐓","🐣","🐤","🐥","🐦","🐧","🕊","🦅","🦆","🦢","🦉","🦚","🦜","🐸","🐊","🐢","🦎","🐍","🐲","🐉","🦕","🦖","🐳","🐋","🐬","🐟","🐠","🐡","🦈","🐙","🦀","🦞","🦐","🦑","🐚","🐌","🦋","🐛","🐜","🐝","🐞","🦗","🕷","🕸","🦂","🦟","💐","🌸","💮","🏵","🌹","🥀","🌺","🌻","🌼","🌷","🌳","🌲","🎄","🌴","🌵","🌾","🌱","🌿","☘","🍀","🍁","🍂","🍃","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌡","☀","🌝","🌞","⭐","🌟","🌠","☁","⛅","⛈","🌤","🌥","🌦","🌧","🌨","🌩","🌪","🌫","🌬","💨","🌀","🌈","🌂","☂","☔","⛱","⚡","❄","☃","⛄","☄","🔥","💦","💧","🌊"],stickers_picker_food_and_drink:["🍏","🍎","🍐","🍅","🥝","🍑","🍒","🍓","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🥭","🥥","🥑","🍆","🥔","🥕","🌽","🌶","🥒","🥬","🥦","🍄","🥜","🌰","🍞","🥐","🥖","🥨","🥯","🥞","🧀","🍖","🍗","🥩","🥓","🍔","🍟","🍕","🌭","🥪","🌮","🌯","🥙","🥚","🍳","🥘","🍲","🥣","🥗","🍿","🧂","🥫","🍱","🍘","🍙","🍚","🍛","🍜","🍝","🍠","🍢","🍣","🍤","🍥","🥮","🍡","🥟","🥠","🥡","🍦","🍧","🍨","🍩","🍪","🎂","🍰","🧁","🥧","🍫","🍬","🍭","🍮","🍯","🍼","🥛","☕","🍵","🍶","🍾","🍷","🍸","🍹","🍺","🍻","🥂","🥃","🥤","🥢","🍽","🍴","🥄"],stickers_picker_sport_and_activities:["⚽","⚾","🥎","🏀","🏐","🏈","🏉","🎾","🥏","🎳","🏏","🏑","🏒","🥍","🏓","🏸","🥊","🥋","🥅","⛳","⛸","🎣","🎽","🛹","🎿","🛷","🥌","🎯","🎱","🎮","🕹","🎰","🎲","🧩","♟","🧗‍♂️️","🧗‍♀️","🤺","🏇","⛷","🏂","🏌️‍♂️","🏌️‍♀️","🏄‍♂️","🏄‍♀️","🚣‍♂️","🚣‍♀️","🏊‍♂️","🏊‍♀️","⛹️‍♂️","⛹️‍♀️","🏋️‍♂️","🏋️‍♀️","🚴‍♂️","🚴‍♀️","🚵‍♂️","🚵‍♀️","🤸","🤼‍♂️","🤼‍♀️","🤽‍♂️","🤽‍♀️","🤾‍♂️","🤾‍♀️","🤹‍♂️","🤹‍♀️","🧘‍♂️","🧘‍♀️","🎖","🏆","🏅","🥇","🥈","🥉"],stickers_picker_travel_and_transport:["🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚋","🚌","🚍","🚎","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🏎","🏍","🛵","🚲","🛴","🚏","🛣","🛤","🛢","⛽","🚨","🚥","🚦","🛑","🚧","⚓","⛵","🛶","🚤","🛳","⛴","🛥","🚢","✈","🛩","🛫","🛬","💺","🚁","🚟","🚠","🚡","🛰","🚀","🛸","🌍","🌎","🌏","🌐","🗺","🗾","🧭","🏔","⛰","🌋","🗻","🏕","🏖","🏜","🏝","🏞","🏟","🏛","🏗","🧱","🏘","🏚","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏨","🏩","🏪","🏫","🏬","🏭","🏯","🏰","💒","🗼","🗽","⛪","🕌","🕍","⛩","🕋","⛲","⛺","🌁","🌃","🏙","🌄","🌅","🌆","🌇","🌉","♨","🌌","🎠","🎡","🎢","💈","🎪"],stickers_picker_subjects:["🎙","🎚","🎛","🎤","🎧","📻","🎷","🎸","🎹","🎺","🎻","🥁","📯","🎭","🖼","🎨","🧵","🧶","🔮","🧿","🧸","🃏","🀄","🎴","🎃","🎆","🎇","🧨","✨","🎈","🎉","🎊","🎋","🎍","🎎","🎏","🎐","🎑","🧧","🎀","🎁","🎗","🎟","🎫","🛎","🧳","⌛","⏳","⌚","⏰","⏱","⏲","🕰","👓","🕶","🥽","🥼","👔","👕","👖","🧣","🧤","🧥","🧦","👗","👘","👙","👚","👛","👜","👝","🛍","🎒","👞","👟","🥾","🥿","👠","👡","👢","👑","👒","🎩","🎓","🧢","⛑","📿","💄","💍","💎","📱","📲","☎","📞","📟","📠","🔋","🔌","💻","🖥","🖨","⌨","🖱","🖲","💽","💾","💿","📀","🧮","🎥","🎞","📽","🎬","📺","📷","📸","📹","📼","🔍","🔎","🕯","💡","🔦","🏮","📔","📕","📖","📗","📘","📙","📚","📓","📒","📃","📜","📄","📰","🗞","📑","🔖","🏷","💰","💴","💵","💶","💷","💸","💳","🧾","💹","💱","💲","✉","💌","📧","📨","📩","📤","📥","📦","📫","📪","📬","📭","📮","🗳","✏","✒","🖋","🖊","🖌","🖍","📝","💼","📁","📂","🗂","📅","📆","🗒","🗓","📇","📈","📉","📊","📋","📌","📍","📎","🖇","📏","📐","✂","🗃","🗄","🗑","🔒","🔓","🔏","🔐","🔑","🗝","🔨","⛏","⚒","🛠","🗡","⚔","🔪","🔫","🏹","🛡","🔧","🔩","⚙","🗜","⚖","🔗","⛓","🧰","🧲","⚗","🧪","🧫","🧬","🔬","🔭","📡","💉","💊","🚪","🛏","🛋","🚽","🚿","🛁","🧴","🧷","🧹","🧺","🧻","🧼","🧽","🧯","🛒","🚬","⚰","⚱","🏺","🗿"],stickers_picker_flags:["🇷🇺","🇰🇿","🇧🇾","🇺🇦","🇲🇳","🇬🇪","🇦🇿","🇹🇯","🇧🇷","🇱🇹","🇱🇻","🇪🇪","🇦🇲","🏁","🚩","🎌","🏴","🏳","🏳️‍🌈","🏴‍☠️","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇨","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇬🇦","🇬🇧","🇬🇩","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇺","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇬","🇺🇲","🇺🇳","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼"]}},705361:(e,t,r)=>{"use strict";r.d(t,{EmojiKeyboardRow:()=>d});r(682772),r(821249),r(319601);var i=r(785893),n=r(659397),o=r(667294),a=r(43124),s=r(364759),c=r(127927),l=r(979693);var u={[c.StickerEmojiKeyboardVariant.WIDE]:l.default.rowWide,[c.StickerEmojiKeyboardVariant.COMPACT]:l.default.rowCompact,[c.StickerEmojiKeyboardVariant.REGULAR]:l.default.rowRegular};function d(e){var t=e.emoji,r=e.onEmojiClick,d=e.className,m=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["emoji","onEmojiClick","className"]),v=(0,c.useStickersEmojiKeyboard)().variant,f=(0,s.useEmojiKeyboard)(),h=f.emojiSections,p=f.selectedEmoji,b=null==p?void 0:p.emojiIndex,k=null==p?void 0:p.sectionIndex,g=void 0!==b&&void 0!==k?h[k][1][b]:void 0,E=(0,o.useMemo)((()=>t.map((e=>(0,i.jsx)(a.EmojiItem,{className:l.default.emoji,emoji:e,active:e===g,onEmojiClick:r},e)))),[t,g,r]);return(0,i.jsx)("div",Object.assign({className:(0,n.classNames)(l.default.row,u[v],d)},m,{children:E}),void 0)}},401164:(e,t,r)=>{"use strict";r.d(t,{HelpHintsProvider:()=>u});r(319601),r(241539),r(788674),r(535666);var i=r(785893),n=r(667294),o=r(194182),a=r(248961),s=r(490472);function c(e,t,r,i,n,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(i,n)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){c(o,i,n,a,s,"next",e)}function s(e){c(o,i,n,a,s,"throw",e)}a(void 0)}))}}function u(e){var t=(0,o.useAPI)(),r=(0,n.useState)(void 0),c=r[0],u=r[1],d=function(){var e=l(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cache.getHelpHints();case 2:r=e.sent,u(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((()=>{d();var e=function(){var e=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===a.CacheKey.HELP_HINTS){e.next=2;break}return e.abrupt("return");case 2:d();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t.cache.addEventListener("change",e),()=>{t.cache.removeEventListener("change",e)}}),[t]),(0,i.jsx)(s.HelpHintsContext.Provider,Object.assign({value:c},e),void 0)}},49720:(e,t,r)=>{"use strict";r.d(t,{LangProvider:()=>s});r(319601);var i=r(785893),n=r(667294),o=r(440941),a=r(393930);function s(e){var t=(0,n.useState)(o.Lang.pack),r=t[0],s=t[1];return(0,n.useEffect)((()=>o.Lang.subscribe((()=>{s(o.Lang.pack)}))),[]),(0,i.jsx)(a.LangContext.Provider,Object.assign({value:r},e),void 0)}},991751:(e,t,r)=>{"use strict";r.d(t,{PeerInfoProvider:()=>o});r(682772),r(319601);var i=r(785893),n=r(763840);function o(e){var t=e.peerInfo,r=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["peerInfo"]);return(0,i.jsx)(n.PeerInfoContext.Provider,Object.assign({value:{peerInfo:t}},r),void 0)}},52653:(e,t,r)=>{"use strict";r.d(t,{Skeleton:()=>a});var i=r(785893),n=r(659397),o=r(661083);function a(e){var t=e.width,r=e.height,a=e.borderRadius,s=e.className;return(0,i.jsx)("div",{className:(0,n.classNames)(o.default.skeleton,s),style:{width:t,height:r,borderRadius:a}},void 0)}},521005:(e,t,r)=>{"use strict";r.d(t,{StickersEmojiKeyboard:()=>y});r(682772),r(319601);var i=r(785893),n=r(659397),o=r(667294),a=r(541978),s=r(398785),c=r(256116),l=r(49720),u=r(691834),d=r(928708),m=r(986779),v=r(991751),f=r(543730),h=r(789706),p=r(795078),b=r(401164),k=r(248961),g=r(855636),E=r(127927),I=r(476001);function S(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}var _={[E.StickerEmojiKeyboardVariant.WIDE]:I.default.keyboardWide,[E.StickerEmojiKeyboardVariant.COMPACT]:I.default.keyboardCompact,[E.StickerEmojiKeyboardVariant.REGULAR]:I.default.keyboardRegular};function y(e){var t=e.queue,r=e.userId,n=e.variant,o=e.isVisible,a=e.visibleTab,s=e.onAPIRequest,u=e.activeProductId,d=e.onTabChange,m=e.peerInfo,k=e.onStickerSend,g=e.onEmojiInsert,E=e.onVmojiEditClick,I=e.onVmojiCreateClick,_=e.onStockItemGiftClick,y=e.onStockItemSettingsClick,w=S(e,["queue","userId","variant","isVisible","visibleTab","onAPIRequest","activeProductId","onTabChange","peerInfo","onStickerSend","onEmojiInsert","onVmojiEditClick","onVmojiCreateClick","onStockItemGiftClick","onStockItemSettingsClick"]);return(0,i.jsx)(l.LangProvider,{children:(0,i.jsx)(v.PeerInfoProvider,Object.assign({peerInfo:m},{children:(0,i.jsx)(c.APIProvider,Object.assign({userId:r,onAPIRequest:s},{children:(0,i.jsx)(b.HelpHintsProvider,{children:(0,i.jsx)(p.StickersEmojiKeyboardProvider,Object.assign({variant:n,isVisible:o,visibleTab:a,onTabChange:d},{children:(0,i.jsx)(h.StickersKeyboardProvider,Object.assign({queue:t,activeProductId:u,onStickerSend:k,onVmojiEditClick:E,onVmojiCreateClick:I,onStockItemGiftClick:_,onStockItemSettingsClick:y},{children:(0,i.jsx)(f.EmojiKeyboardProvider,Object.assign({onEmojiInsert:g},{children:(0,i.jsx)(j,Object.assign({},w),void 0)}),void 0)}),void 0)}),void 0)},void 0)}),void 0)}),void 0)},void 0)}function j(e){var t=e.onShopClick,r=e.className,c=S(e,["onShopClick","className"]),l=(0,g.useStickersKeyboard)().storeNewItemsCount,v=(0,E.useStickersEmojiKeyboard)(),f=v.variant,h=v.visibleTab,p=v.activeTab,b=v.isVisible,y=v.setActiveTab,j=v.onTabChange;(0,o.useEffect)((()=>{a.LottieManager.init()}),[]),(0,o.useEffect)((()=>{h&&y(h)}),[h,y]);var w=p===k.Tab.STICKERS;return(0,i.jsx)("div",Object.assign({className:(0,n.classNames)(r,I.default.keyboard,_[f])},c,{children:(0,i.jsxs)("div",Object.assign({className:I.default.in},{children:[(0,i.jsxs)("div",Object.assign({className:(0,n.classNames)(I.default.content)},{children:[(!h||h===k.Tab.EMOJI)&&(0,i.jsx)(u.EmojiKeyboard,{isVisible:b&&p===k.Tab.EMOJI,className:(0,n.classNames)(I.default.item,{[I.default.itemTransformed]:w&&!h})},void 0),(!h||h===k.Tab.STICKERS)&&(0,i.jsx)(m.StickersKeyboard,{className:(0,n.classNames)(I.default.item,{[I.default.itemTransformed]:w&&!h})},void 0)]}),void 0),!h&&(0,i.jsx)(s.Tabbar,{activeTab:p,shopIndicatorMode:l?d.TabbarItemIndicator.DESTRUCTIVE:void 0,onShopClick:t,onTabChange:e=>{y(e),null==j||j({tab:e})}},void 0)]}),void 0)}),void 0)}},795078:(e,t,r)=>{"use strict";r.d(t,{StickersEmojiKeyboardProvider:()=>c});r(682772),r(319601);var i=r(785893),n=r(667294),o=r(194182),a=r(248961),s=r(127927);function c(e){var t=e.variant,r=e.isVisible,c=e.visibleTab,l=e.onTabChange,u=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["variant","isVisible","visibleTab","onTabChange"]),d=(0,o.useAPI)(),m=d.cache.tabbarActiveTab,v=(0,n.useState)(m||a.Tab.EMOJI),f=v[0],h=v[1];return(0,n.useEffect)((()=>{m!==f&&d.cache.setTabbarActiveTab(f)}),[f,m]),(0,i.jsx)(s.StickersEmojiKeyboardContext.Provider,Object.assign({value:{variant:t,isVisible:r,visibleTab:c,activeTab:f,setActiveTab:h,onTabChange:l}},u),void 0)}},986779:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboard:()=>S});r(226699),r(682772),r(66992),r(821249),r(702707),r(319601),r(241539),r(470189),r(132023),r(454747),r(333948);var i,n=r(785893),o=r(86894),a=r(659397),s=r(135432),c=r(154289),l=r(667294),u=r(448882),d=r(601137),m=r(905213),v=r(618759),f=r(940821),h=r(194182),p=r(248961),b=r(127927),k=r(855636),g=r(887886);function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},E.apply(this,arguments)}!function(e){e.ROW="row",e.HEADER="header"}(i||(i={}));var I=[{type:i.HEADER,element:(0,n.jsx)(m.StickersKeyboardHeader,{},Math.random())},...(0,a.createArray)(6).map((e=>({type:i.ROW,element:(0,n.jsx)(u.StickersKeyboardRow,{},e)})))];function S(e){var t=e.className,r=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["className"]),S=(0,h.useAPI)(),_=(0,b.useStickersEmojiKeyboard)(),y=_.isVisible,j=_.setActiveTab,w=(0,k.useStickersKeyboard)(),x=w.stickersSize,O=w.activeProductId,C=w.stockItemsMap,R=w.stickersCountPerRow,T=w.stickersVerticalGap,A=w.stickersHorizontalGap,N=w.selectedStockItemId,P=w.setSelectedStockItemId,K=(0,l.useRef)(null),M=(0,l.useRef)(0),V=(0,l.useRef)([]),H=(0,l.useRef)(!1),L=(0,l.useMemo)((()=>{if(!C)return I;var e=[];return[...C.values()].forEach((t=>{var r=t.id,o=t.product.stickers;e.push({type:i.HEADER,element:(0,n.jsx)(m.StickersKeyboardHeader,{stockItem:t},r)}),r===p.Tab.VMOJI&&e.push({type:i.ROW,element:(0,n.jsx)(v.StickersKeyboardVmojiRow,{},p.Tab.VMOJI)}),o&&(0,a.chunkArray)(o,R).forEach(((o,a)=>{e.push({type:i.ROW,element:(0,n.jsx)(u.StickersKeyboardRow,{stickers:o,stockItem:t},`${r}${a}`)})}))})),e}),[C,R]),G=(0,l.useMemo)((()=>{var e=V.current,t=L.reduce(((e,t,r)=>(t.type===i.HEADER&&e.push(r),e)),[]);return(0,a.isEqual)(t,e)||!t.length?e:(V.current=t,t)}),[L]),D=e=>G.includes(e),z=e=>M.current===e,B=(0,l.useCallback)((e=>(M.current=[...G].reverse().find((t=>e.startIndex>=t))||0,[...new Set([M.current,...(0,s.defaultRangeExtractor)(e)])].sort(((e,t)=>e-t)))),[G]),F=(0,c.useVirtualizer)({rangeExtractor:B,count:L.length,estimateSize:()=>x,getScrollElement:()=>K.current}),U=F.range,W=e=>{var t=null==C?void 0:C.get(e);if(t){var r=t.index,i=G[r];N!==e&&(P(e),F.scrollToIndex(i,{align:"start",behavior:"auto"}))}};return(0,l.useEffect)((()=>{var e=K.current;if(e&&!C)return e.style.setProperty("overflow","hidden","important"),()=>{e.style.removeProperty("overflow")}}),[K,C]),(0,l.useEffect)((()=>{void 0!==O&&j(p.Tab.STICKERS)}),[O]),(0,l.useEffect)((()=>{var e=S.cache.stickersActiveTab;C&&(H.current=!1,O||e?(W(O||e),H.current=!0):H.current=!0)}),[G,C,O,y]),(0,l.useEffect)((()=>{var e=H.current,t=F.calculateRange(),r=t.startIndex,i=t.endIndex;if((r||i)&&G.length&&C&&e){var n=[...C.values()],o=G.findIndex((e=>e>=r)),a=G.findIndex((e=>e>=i)),s=n[o-Number(o===a&&r!==i)];if(s){var c=s.id;P(c)}}}),[U,G]),(0,n.jsx)(f.StickersKeyboardSelectProvider,Object.assign({selectStockItem:W},{children:(0,n.jsxs)("div",Object.assign({className:(0,a.classNames)(g.default.keyboard,t),style:{"--stickers-size":`${x}px`,"--stickers-vertical-gap":`${T}px`,"--stickers-horizontal-gap":`${A}px`}},r,{children:[(0,n.jsx)(o.CustomScrollView,Object.assign({boxRef:K,className:(0,a.classNames)(g.default.scroll,{[g.default.scrollDisabled]:!C}),autoHideScrollbar:!0},{children:(0,n.jsx)("div",Object.assign({className:g.default.in,style:{height:F.getTotalSize()}},{children:F.getVirtualItems().map((e=>{var t=e.key,r=e.index,i=e.start;return(0,n.jsx)("div",Object.assign({"data-index":r,ref:F.measureElement,className:(0,a.classNames)(g.default.item,{[g.default.itemHeader]:D(r)}),style:E({},z(r)?{position:"sticky"}:{position:"absolute",transform:`translateY(${i}px)`})},{children:L[r].element}),t)}))}),void 0)}),void 0),C&&(0,n.jsx)(d.StickersKeyboardGroups,{},void 0)]}),void 0)}),void 0)}},30765:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardGroup:()=>l});r(226699),r(682772),r(821249),r(319601),r(132023);var i=r(785893),n=r(659397),o=r(667294),a=r(279359),s=r(855636),c=r(897935);function l(e){var t=e.group,r=e.className,l=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["group","className"]),u=(0,s.useStickersKeyboardSelect)().selectStockItem,d=(0,s.useStickersKeyboard)(),m=d.selectedStockItemId,v=d.stockItemsMap,f=(0,o.useRef)(null),h=(0,o.useState)(),p=h[0],b=h[1],k=e=>()=>{u(e)},g=(0,o.useMemo)((()=>{if(Array.isArray(t)||(t=[t]),v)return t.map((e=>{var t=v.get(e);if(t){var r=t.id;return(0,i.jsx)(a.StickersKeyboardGroupItem,{className:c.default.item,stockItem:t,active:r===m,onClick:k(r)},r)}}))}),[t,v,m]);(0,o.useLayoutEffect)((()=>{var e,t=f.current;if(t){var r=null==(e=t.children[0])?void 0:e.clientWidth;r&&b(r)}}),[f]);var E=Boolean(Array.isArray(t)&&Number(null==g?void 0:g.length)>1&&m&&t.includes(m));return(0,i.jsx)("div",Object.assign({ref:f,className:(0,n.classNames)(c.default.group,r,{[c.default.groupActive]:E,[c.default.groupHidden]:!p}),style:{"--group-item-width":`${p}px`}},l,{children:g}),void 0)}},279359:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardGroupItem:()=>v});r(682772),r(66992),r(651532),r(319601),r(241539),r(333948);var i=r(785893),n=r(659397),o=r(667294),a=r(690409),s=r(180271),c=r(94566),l=r(823347),u=r(248961),d=r(442489);var m=new Map([[u.Tab.VMOJI,(0,i.jsx)(s.default,{},u.Tab.VMOJI)],[u.Tab.RECENT,(0,i.jsx)(c.default,{},u.Tab.RECENT)],[u.Tab.FAVORITE,(0,i.jsx)(l.default,{},u.Tab.FAVORITE)]]);function v(e){e.index;var t,r,s=e.stockItem,c=e.active,l=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["index","stockItem","active"]),u=(0,o.useState)(!0),v=u[0],f=u[1],h=null==s?void 0:s.product.title,p=null==s||null==(t=s.product)?void 0:t.is_new,b=m.get(null==s?void 0:s.id),k=new a.BaseUrlBuilder({size:24,images:null==s||null==(r=s.product)?void 0:r.previews}).build();return(0,o.useEffect)((()=>{b&&f(!1)}),[b]),(0,i.jsx)("div",Object.assign({},l,{children:(0,i.jsx)("div",Object.assign({className:(0,n.classNames)(d.default.in,{[d.default.inActive]:c,[d.default.inHidden]:v,[d.default.inPlaceholder]:!k&&!b,[d.default.inIndicator]:p})},{children:b?(0,i.jsx)("div",Object.assign({"aria-label":h,className:(0,n.classNames)(d.default.icon,d.default.iconService)},{children:b}),void 0):(0,i.jsx)("img",{alt:h,className:(0,n.classNames)(d.default.icon),loading:"lazy",src:k,onLoad:()=>{f(!1)}},void 0)}),void 0)}),void 0)}},601137:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardGroups:()=>f});r(682772),r(821249),r(319601);var i,n=r(785893),o=r(659397),a=r(975803),s=r(154289),c=r(667294),l=r(30765),u=r(862412),d=r(272505),m=r(855636),v=r(130146);function f(e){var t=e.className,r=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["className"]),f=(0,m.useStickersKeyboard)(),h=f.getGroupIndex,p=f.isGroupedStockItem,b=f.stockItemsGroups,k=f.selectedStockItemId,g=f.prevSelectedStockItemId,E=(0,c.useRef)(null),I=(0,c.useState)(!1),S=I[0],_=I[1],y=(0,c.useState)(!0),j=y[0],w=y[1],x=(0,c.useMemo)((()=>(null==b?void 0:b.map((e=>(0,n.jsx)(l.StickersKeyboardGroup,{className:v.default.groupIn,group:e},String(e)))))||[]),[b]),O=x.length,C=(0,s.useVirtualizer)({count:O,overscan:15,horizontal:!0,getScrollElement:()=>E.current,estimateSize:()=>32,onChange:e=>{var t=e.range,r=t.startIndex,i=t.endIndex;_(r>0),w(i<x.length-1)}}),R=(0,u.useSmoothScroll)(C).scrollTo,T=e=>C.getVirtualItems().find((t=>t.index===e)),A=e=>()=>{var t,r=C.range,n=r.startIndex,o=r.endIndex,a=null==(t=C.scrollElement)?void 0:t.getBoundingClientRect();if(a){var s=a.width;switch(e){case i.LEFT:var c=T(n-1);if(!c)return;var l=c.size,u=c.end;R({offset:u+2*l-s});break;case i.RIGHT:var d=T(o-1);if(!d)return;var m=d.size,v=d.start;R({offset:v-m})}}};return(0,d.useHorizontalScroll)(E),(0,c.useEffect)((()=>{var e,t,r;if(k&&b){var i=h(k),n=h(g),o=p(g);if(void 0!==i&&!(o&&i>Number(n))){var a=T(i);if(a){var s=a.start,c=null==(e=C.scrollElement)?void 0:e.getBoundingClientRect(),l=null==(t=C.scrollElement)||null==(r=t.getElementsByClassName(v.default.groupIn)[0])?void 0:r.getBoundingClientRect();l&&c&&R({offset:s+l.width/2-c.width/2})}}}}),[k,b]),(0,n.jsxs)("div",Object.assign({className:(0,o.classNames)(v.default.groups,t)},r,{children:[(0,n.jsx)("div",{className:(0,o.classNames)(v.default.shadow,v.default.shadowLeft,{[v.default.shadowVisible]:S})},void 0),(0,n.jsx)("div",{className:(0,o.classNames)(v.default.shadow,v.default.shadowRight,{[v.default.shadowVisible]:j})},void 0),(0,n.jsx)("div",Object.assign({className:(0,o.classNames)(v.default.chevron,v.default.chevronLeft,{[v.default.chevronActive]:S}),onClick:A(i.LEFT)},{children:(0,n.jsx)(a.default,{},void 0)}),void 0),(0,n.jsx)("div",Object.assign({onClick:A(i.RIGHT),className:(0,o.classNames)(v.default.chevron,v.default.chevronRight,{[v.default.chevronActive]:j})},{children:(0,n.jsx)(a.default,{},void 0)}),void 0),(0,n.jsx)("div",Object.assign({ref:E,className:v.default.in},{children:(0,n.jsx)("div",Object.assign({className:v.default.items,style:{width:C.getTotalSize()}},{children:Boolean(x.length)&&C.getVirtualItems().map((e=>{var t=e.key,r=e.index,i=e.start;return(0,n.jsx)("div",Object.assign({"data-index":r,ref:C.measureElement,className:(0,o.classNames)(v.default.group),style:{transform:`translateX(${i}px)`}},{children:x[r]}),t)}))}),void 0)}),void 0)]}),void 0)}!function(e){e.LEFT="left",e.RIGHT="right"}(i||(i={}))},978697:(e,t,r)=>{"use strict";r.d(t,{PeerInfo:()=>u});r(682772),r(319601);var i=r(785893),n=r(86894),o=r(641308),a=r(619141),s=r(393930),c=r(763840),l=r(926464);function u(e){var t=e.isStyle,r=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["isStyle"]),u=(0,s.useLang)().translate,d=(0,c.usePeerInfo)().peerInfo;if(!d)return null;var m=d.first_name_gen,v=d.photo_50;return(0,i.jsx)(a.TextTooltip,Object.assign({forcePortal:!0,text:(0,i.jsx)(n.Caption,Object.assign({className:l.default.popper,level:"2"},{children:u(t?"stickers_picker_peer_has_style":"stickers_picker_peer_has_pack",{name:m})}),void 0),offsetDistance:8,offsetSkidding:50,placement:"bottom-end"},{children:(0,i.jsx)(n.Avatar,Object.assign({src:v,size:16,badge:(0,i.jsx)(o.default,{className:l.default.icon},void 0)},r),void 0)}),void 0)}},905213:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardHeader:()=>b});r(226699),r(682772),r(319601),r(132023);var i=r(785893),n=r(86894),o=r(659397),a=r(961943),s=r(31221),c=r(986536),l=r(978697),u=r(52653),d=r(393930),m=r(763840),v=r(855636),f=r(127927),h=r(754542);var p={[f.StickerEmojiKeyboardVariant.WIDE]:h.default.headerWide,[f.StickerEmojiKeyboardVariant.COMPACT]:h.default.headerCompact,[f.StickerEmojiKeyboardVariant.REGULAR]:h.default.headerRegular};function b(e){var t=e.stockItem,r=e.className,b=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["stockItem","className"]),k=(0,d.useLang)().translate,g=(0,m.usePeerInfo)().peerInfo,E=(0,f.useStickersEmojiKeyboard)().variant,I=(0,v.useStickersKeyboard)(),S=I.stockItemsAvailableToGift,_=I.onVmojiEditClick,y=I.onStockItemGiftClick,j=I.onStockItemSettingsClick;if(r=(0,o.classNames)(h.default.header,p[E],r),!t)return(0,i.jsx)("div",Object.assign({className:r},b,{children:(0,i.jsx)(u.Skeleton,{width:128,height:"var(--vkui--font_subhead--line_height--regular)"},void 0)}),void 0);var w=t.can_gift,x=t.product,O=x.id,C=x.title,R=x.base_id,T=x.style_ids,A=x.vmoji_avatar,N=Boolean(w),P=void 0!==R,K=Boolean(A),M=Boolean((null==T?void 0:T.length)||P||K),V=Boolean(w&&g&&(null==S?void 0:S.includes(O)));return(0,i.jsxs)("div",Object.assign({className:(0,o.classNames)(h.default.header,r)},b,{children:[(0,i.jsx)(n.Subhead,Object.assign({className:h.default.title,weight:"3"},{children:k(C)}),void 0),M&&(0,i.jsx)(a.default,{className:(0,o.classNames)(h.default.icon,h.default.settings),onClick:()=>j(t)},void 0),K&&(0,i.jsx)("div",Object.assign({className:(0,o.classNames)(h.default.brush,h.default.headerAside),onClick:()=>A&&_(A)},{children:(0,i.jsx)(s.default,{className:h.default.icon},void 0)}),void 0),N&&(0,i.jsxs)(i.Fragment,{children:[V&&(0,i.jsx)(l.PeerInfo,{className:h.default.headerAside,isStyle:P},void 0),Boolean(y)&&(0,i.jsx)(c.default,{className:(0,o.classNames)(h.default.icon,h.default.headerAside),onClick:()=>null==y?void 0:y(t,g)},void 0)]},void 0)]}),void 0)}},789706:(e,t,r)=>{"use strict";r.d(t,{RECENT_STICKERS_DEFAULT_LIMIT:()=>k,StickersKeyboardProvider:()=>g});r(682772),r(66992),r(651532),r(319601),r(241539),r(788674),r(454747),r(333948),r(535666);var i=r(785893),n=r(659397),o=r(583682),a=r(667294),s=r(194182),c=r(248961),l=r(763840),u=r(127927),d=r(855636);function m(e,t,r,i,n,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(i,n)}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},v.apply(this,arguments)}var f={[u.StickerEmojiKeyboardVariant.WIDE]:86,[u.StickerEmojiKeyboardVariant.COMPACT]:80,[u.StickerEmojiKeyboardVariant.REGULAR]:92},h={[u.StickerEmojiKeyboardVariant.WIDE]:4,[u.StickerEmojiKeyboardVariant.COMPACT]:3,[u.StickerEmojiKeyboardVariant.REGULAR]:3},p={[u.StickerEmojiKeyboardVariant.WIDE]:8,[u.StickerEmojiKeyboardVariant.COMPACT]:6,[u.StickerEmojiKeyboardVariant.REGULAR]:8},b={[u.StickerEmojiKeyboardVariant.WIDE]:6,[u.StickerEmojiKeyboardVariant.COMPACT]:8,[u.StickerEmojiKeyboardVariant.REGULAR]:8},k=32;function g(e){var t=e.queue,r=e.activeProductId,k=e.onStickerSend,g=e.onVmojiEditClick,E=e.onVmojiCreateClick,I=e.onStockItemGiftClick,S=e.onStockItemSettingsClick,_=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["queue","activeProductId","onStickerSend","onVmojiEditClick","onVmojiCreateClick","onStockItemGiftClick","onStockItemSettingsClick"]),y=(0,s.useAPI)(),j=(0,l.usePeerInfo)().peerInfo,w=(0,d.useStickersKeyboard)().isServiceStockItem,x=(0,u.useStickersEmojiKeyboard)(),O=x.variant,C=x.isVisible,R=(0,a.useRef)(new o.LazyLoadQueue),T=(0,a.useRef)(),A=(0,a.useRef)([]),N=(0,a.useState)(),P=N[0],K=N[1],M=(0,a.useState)(),V=M[0],H=M[1],L=(0,a.useState)(),G=L[0],D=L[1],z=(0,a.useState)(),B=z[0],F=z[1],U=(0,a.useState)(),W=U[0],Z=U[1],J=(0,a.useState)(),q=J[0],Y=J[1],$=(0,a.useState)(),Q=$[0],X=$[1],ee=(0,a.useMemo)((()=>{var e=new Map,t=[],r=new Map,i=0;if(P&&G&&B){B.length&&(e.set(c.Tab.FAVORITE,{id:c.Tab.FAVORITE,index:i,referrer:d.StickerSendReferrer.FAVORITE,product:{title:"stickers_picker_favorite",stickers:B}}),t.push(c.Tab.FAVORITE),i++),G.length&&(e.set(c.Tab.RECENT,{id:c.Tab.RECENT,referrer:d.StickerSendReferrer.RECENT,index:i,product:{title:"stickers_picker_recently_used",stickers:G}}),t.push(c.Tab.RECENT),i++),-1!==(null==P?void 0:P.findIndex((e=>void 0!==e.product.vmoji_avatar)))||V||(e.set(c.Tab.VMOJI,{id:c.Tab.VMOJI,index:i,referrer:d.StickerSendReferrer.KEYBOARD,product:{title:"stickers_picker_vmoji"}}),t.push(c.Tab.VMOJI),i++),P.forEach((n=>{var o=n.product,a=o.id,s=o.vmoji_avatar;if(e.set(a,v({id:a,index:i,referrer:d.StickerSendReferrer.KEYBOARD},n)),s){var c=r.get(s.id);c||(c=t.push([])-1,r.set(s.id,c));var l=t[c];Array.isArray(l)&&l.push(a)}else t.push(a);i++}));var o=A.current;return(0,n.isEqual)(t,o)&&(t=o),{stockItemsMap:e,stockItemsGroups:t}}}),[P,G,B]),te=(0,a.useReducer)(((e,t)=>{if(e&&(T.current=e),t){var r=null==ee?void 0:ee.stockItemsMap.get(t);if(r){var i=r.id;y.cache.setStickersActiveTab(i),(e=>{if(!w(e)){var t=null==P?void 0:P.find((t=>t.product.id===e));t&&P&&t.product.is_new&&(t.product.is_new=!1,y.cache.setStockItems(P,{notify:!1}),y.store.markStickerPackAsViewed({pack_id:e}))}})(i)}}return t}),void 0),re=te[0],ie=te[1],ne=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r,i,n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([y.cache.getStockItems({active:!0}),y.cache.getGlobalHashes(),y.cache.getRecentStickers(),y.cache.getFavoriteStickers(),y.cache.getStickersImageConfigs()]);case 2:t=e.sent,r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],H(y.cache.hasVmojiCharacter),D(n),F(o),Z(a),X(null==i?void 0:i.store_new_items),K(r);case 14:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){m(o,i,n,a,s,"next",e)}function s(e){m(o,i,n,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,a.useEffect)((()=>(P&&y.cache.reload(),ne(),y.cache.addEventListener("change",ne),()=>{y.cache.removeEventListener("change",ne)})),[y,C]),(0,a.useEffect)((()=>{if(Y(void 0),j){var e,t=j.id;e=t,y.store.getStickerPacksAvailableForGift({user_id:e}).then(Y)}}),[j]);var oe=f[O],ae=h[O],se=b[O],ce=p[O];return(0,i.jsx)(d.StickersKeyboardContext.Provider,Object.assign({value:{queue:t||R.current,activeProductId:r,stickersSize:oe,stickersCountPerRow:ae,stickersVerticalGap:se,stickersHorizontalGap:ce,stockItems:P,stockItemsMap:null==ee?void 0:ee.stockItemsMap,stockItemsGroups:null==ee?void 0:ee.stockItemsGroups,selectedStockItemId:re,setSelectedStockItemId:ie,prevSelectedStockItemId:T.current,recentStickers:G,favoriteStickers:B,hasVmojiCharacter:V,storeNewItemsCount:Q,stickerImageConfigs:W,stockItemsAvailableToGift:q,onStickerSend:k,onVmojiEditClick:g,onVmojiCreateClick:E,onStockItemGiftClick:I,onStockItemSettingsClick:S}},_),void 0)}},940821:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardSelectProvider:()=>o});r(682772),r(319601);var i=r(785893),n=r(855636);function o(e){var t=e.selectStockItem,r=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["selectStockItem"]);return(0,i.jsx)(n.StickersKeyboardSelectContext.Provider,Object.assign({value:{selectStockItem:t}},r),void 0)}},448882:(e,t,r)=>{"use strict";r.d(t,{rowVariantModifier:()=>b,StickersKeyboardRow:()=>k});r(682772),r(66992),r(821249),r(140561),r(651532),r(319601),r(241539),r(333948),r(535666);var i=r(785893),n=r(667294),o=r(659397),a=r(86894),s=r(690409),c=r(123018),l=r(194182),u=r(855636),d=r(789706),m=r(127927),v=r(439942);function f(e,t,r,i,n,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(i,n)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){f(o,i,n,a,s,"next",e)}function s(e){f(o,i,n,a,s,"throw",e)}a(void 0)}))}}var p=new Map([[a.Appearance.LIGHT,s.Theme.LIGHT],[a.Appearance.DARK,s.Theme.DARK]]),b={[m.StickerEmojiKeyboardVariant.WIDE]:v.default.rowWide,[m.StickerEmojiKeyboardVariant.COMPACT]:v.default.rowCompact,[m.StickerEmojiKeyboardVariant.REGULAR]:v.default.rowRegular};function k(e){var t=e.stickers,r=e.stockItem,s=e.className,f=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["stickers","stockItem","className"]),k=(0,l.useAPI)(),g=(0,a.useAppearance)(),E=(0,m.useStickersEmojiKeyboard)().variant,I=(0,u.useStickersKeyboard)(),S=I.queue,_=I.stickersSize,y=I.favoriteStickers,j=I.stickersCountPerRow,w=I.stickerImageConfigs,x=I.addToFavorite,O=I.removeFromFavorite,C=I.onStickerSend,R=(e,t)=>h(regeneratorRuntime.mark((function r(){var i,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return C(e,t),r.next=3,k.cache.getRecentStickers();case 3:if(i=r.sent){r.next=6;break}return r.abrupt("return");case 6:if(!(-1!==i.findIndex((t=>t.sticker_id===e.sticker_id)))){r.next=9;break}return r.abrupt("return");case 9:n=i.length>=d.RECENT_STICKERS_DEFAULT_LIMIT?i.length-d.RECENT_STICKERS_DEFAULT_LIMIT+1:0,i.splice(0,n,e),k.cache.setRecentStickers(i,{notify:!1});case 12:case"end":return r.stop()}}),r)}))),T=(e,t)=>()=>{t?O(e):x(e)},A=(0,n.useMemo)((()=>(null==t?void 0:t.map((e=>{var n=null==r?void 0:r.referrer;if(t&&w){var o=w.items,a=w.default_id,s=e.sticker_id,l=e.is_allowed,u=Boolean(null==y?void 0:y.find((t=>t.sticker_id===e.sticker_id)));return(0,i.jsx)(c.Sticker,{loading:"lazy",className:v.default.sticker,name:String(s),size:_,queue:S,sticker:e,theme:p.get(g),configs:o,favorite:u,disabled:!l,defaultConfigId:a,onClick:R(e,n),onFavoriteClick:T(e,u)},s)}})))||(0,o.createArray)(j).map((e=>(0,i.jsx)(c.Sticker,{className:v.default.sticker,size:_},e)))),[S,t,g,_,r,y,w]);return(0,i.jsx)("div",Object.assign({className:(0,o.classNames)(v.default.row,v.default.rowStickers,b[E],s)},f,{children:A}),void 0)}},618759:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardVmojiRow:()=>d});r(682772),r(319601);var i=r(785893),n=r(86894),o=r(448882),a=r(393930),s=r(855636),c=r(127927),l=r(490472),u=r(124453);function d(e){e.className;var t=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["className"]),r=(0,n.useAppearance)(),d=(0,a.useLang)().translate,m=(0,c.useStickersEmojiKeyboard)().variant,v=(0,l.useHelpHints)().getHintResource,f=(0,s.useStickersKeyboard)().onVmojiCreateClick,h=r===n.Appearance.LIGHT?l.KeyboardStickersVmojiResourceKey.VMOJI_ONBOARDING_LIGHT:l.KeyboardStickersVmojiResourceKey.VMOJI_ONBOARDING_DARK,p=v(l.HelpHintId.KEYBOARD_STICKERS_VMOJI,h);return(0,i.jsx)("div",Object.assign({className:o.rowVariantModifier[m]},t,{children:(0,i.jsxs)("div",Object.assign({className:u.default.card},{children:[(0,i.jsx)("figure",{className:u.default.image,style:{backgroundImage:`url(${null==p?void 0:p.value})`}},void 0),(0,i.jsx)("div",Object.assign({className:u.default.button},{children:(0,i.jsx)(n.Button,Object.assign({size:"s",mode:"outline",appearance:"accent",onClick:f},{children:d("stickers_picker_vmoji_create_character")}),void 0)}),void 0)]}),void 0)}),void 0)}},398785:(e,t,r)=>{"use strict";r.d(t,{Tabbar:()=>m});r(682772),r(319601);var i=r(785893),n=r(659397),o=r(147650),a=r(393657),s=r(569456),c=r(928708),l=r(194182),u=r(248961),d=r(963849);function m(e){var t=e.activeTab,r=e.shopIndicatorMode,m=e.onShopClick,v=e.onTabChange,f=e.className,h=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["activeTab","shopIndicatorMode","onShopClick","onTabChange","className"]),p=(0,l.useAPI)(),b=e=>()=>{null==v||v(e)};return(0,i.jsxs)("div",Object.assign({className:(0,n.classNames)(d.default.tabbar,f)},h,{children:[(0,i.jsx)(c.TabbarItem,Object.assign({className:d.default.item,active:t===u.Tab.EMOJI,onClick:b(u.Tab.EMOJI)},{children:(0,i.jsx)(o.default,{},void 0)}),void 0),(0,i.jsx)(c.TabbarItem,Object.assign({className:d.default.item,active:t===u.Tab.STICKERS,onClick:b(u.Tab.STICKERS)},{children:(0,i.jsx)(a.default,{},void 0)}),void 0),(0,i.jsx)(c.TabbarItem,Object.assign({className:d.default.item,indicator:r,onClick:e=>{p.store.markAsViewed({type:"stickers",reset:String(["store_new_items","global_promotion"])}),null==m||m(e)}},{children:(0,i.jsx)(s.default,{},void 0)}),void 0)]}),void 0)}},928708:(e,t,r)=>{"use strict";r.d(t,{TabbarItemIndicator:()=>i,TabbarItem:()=>c});r(682772),r(319601);var i,n=r(785893),o=r(659397),a=r(81251);!function(e){e.NONE="none",e.PRIMARY="primary",e.SECONDARY="secondary",e.DESTRUCTIVE="destructive"}(i||(i={}));var s={[i.NONE]:a.default.indicatorNone,[i.PRIMARY]:a.default.indicatorPrimary,[i.SECONDARY]:a.default.indicatorSecondary,[i.DESTRUCTIVE]:a.default.indicatorDestructive};function c(e){var t=e.active,r=e.indicator,c=void 0===r?i.NONE:r,l=e.className,u=e.children,d=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["active","indicator","className","children"]);return(0,n.jsx)("div",Object.assign({className:(0,o.classNames)(l,a.default.item,a.default.indicator,s[c],{[a.default.itemActive]:t})},d,{children:u}),void 0)}},194182:(e,t,r)=>{"use strict";r.d(t,{APIContext:()=>o,useAPI:()=>a});r(241539),r(788674);var i=r(667294),n=r(928525),o=(0,i.createContext)(new n.API({userId:0,onAPIRequest:()=>Promise.reject()}));function a(){return(0,i.useContext)(o)}},364759:(e,t,r)=>{"use strict";r.d(t,{EmojiKeyboardContext:()=>a,useEmojiKeyboard:()=>s});r(66992),r(747042),r(651532),r(319601),r(241539),r(333948);var i=r(667294),n=r(194182);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},o.apply(this,arguments)}var a=(0,i.createContext)({});function s(){var e=(0,n.useAPI)(),t=(0,i.useContext)(a),r=t.emojiCountPerRow,s=t.setRecentEmoji,c=t.onEmojiInsert;return o({},t,{insertEmoji:t=>{c(t),(t=>{var i=new Map(e.cache.recentEmoji),n=i.get(t)||0;i.set(t,n+1);var o=[...i].reverse().slice(0,2*r);s(o),e.cache.setRecentEmoji(o)})(t)}})}},490472:(e,t,r)=>{"use strict";r.d(t,{HelpHintsContext:()=>s,HelpHintId:()=>o,KeyboardStickersVmojiResourceKey:()=>a,useHelpHints:()=>c});r(319601);var i=r(667294);function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n.apply(this,arguments)}var o,a,s=(0,i.createContext)(void 0);function c(){var e=(0,i.useContext)(s),t=t=>null==e?void 0:e.items.find((e=>e.id===t));return n({},e,{getHint:t,getHintResource:(e,r)=>{var i,n=t(e);if(n)return null==n||null==(i=n.resources)?void 0:i.find((e=>e.key===r))}})}!function(e){e.KEYBOARD_STICKERS_VMOJI="keyboard:stickers_vmoji"}(o||(o={})),function(e){e.VMOJI_ONBOARDING_LIGHT="vmoji_kb_onboarding_light",e.VMOJI_ONBOARDING_DARK="vmoji_kb_onboarding_dark"}(a||(a={}))},272505:(e,t,r)=>{"use strict";r.d(t,{useHorizontalScroll:()=>n});var i=r(667294);function n(e){(0,i.useEffect)((()=>{var t=e.current;if(t){var r=e=>{e.deltaX||(t.scrollLeft+=e.deltaY)};return t.addEventListener("wheel",r,{passive:!0}),()=>{t.removeEventListener("wheel",r)}}}),[e])}},393930:(e,t,r)=>{"use strict";r.d(t,{LangContext:()=>o,useLang:()=>a});r(66992),r(241539),r(115306),r(333948);var i=r(785893),n=r(667294),o=(0,n.createContext)(void 0);function a(){var e=(0,n.useContext)(o);return{translate:(t,r)=>{if(!t||!e)return(0,i.jsx)(i.Fragment,{children:" "},void 0);var n=e.keys;return t in n?n[t].replace(/{([^]+?)}/g,((e,t)=>{var i=null==r?void 0:r[t];return void 0===i?"":String(i)})):t}}}},763840:(e,t,r)=>{"use strict";r.d(t,{PeerInfoContext:()=>n,usePeerInfo:()=>o});var i=r(667294),n=(0,i.createContext)({});function o(){return(0,i.useContext)(n)}},862412:(e,t,r)=>{"use strict";r.d(t,{useSmoothScroll:()=>a});var i=r(659397),n=r(667294),o=r(101438);function a(e){var t=(0,n.useRef)(0);return{scrollTo:(0,n.useCallback)((0,i.debounce)((function(r){var i=void 0===r?{}:r,n=i.offset,a=void 0===n?0:n,s=i.duration,c=void 0===s?300:s;t.current=Date.now();var l=e.scrollOffset,u=t.current,d=()=>{if(t.current===u){var r=Date.now()-u,i=(0,o.easeOutQuart)(Math.min(r/c,1)),n=l+(a-l)*i;r<c&&requestAnimationFrame(d),e.scrollToOffset(n)}};requestAnimationFrame(d)}),150),[e])}}},127927:(e,t,r)=>{"use strict";r.d(t,{StickerEmojiKeyboardVariant:()=>i,StickersEmojiKeyboardContext:()=>a,useStickersEmojiKeyboard:()=>s});var i,n=r(667294),o=r(248961);!function(e){e.COMPACT="compact",e.REGULAR="3_in_row",e.WIDE="4_in_row"}(i||(i={}));var a=(0,n.createContext)({variant:i.REGULAR,activeTab:o.Tab.EMOJI,setActiveTab:()=>{}});function s(){return(0,n.useContext)(a)}},855636:(e,t,r)=>{"use strict";r.d(t,{StickerSendReferrer:()=>i,StickersKeyboardContext:()=>l,useStickersKeyboard:()=>u,StickersKeyboardSelectContext:()=>d,useStickersKeyboardSelect:()=>m});r(226699),r(66992),r(747042),r(140561),r(241539),r(788674),r(132023),r(333948),r(535666);var i,n=r(667294),o=r(194182);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},a.apply(this,arguments)}function s(e,t,r,i,n,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(i,n)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){s(o,i,n,a,c,"next",e)}function c(e){s(o,i,n,a,c,"throw",e)}a(void 0)}))}}!function(e){e.RECENT="recent",e.FAVORITE="favourite",e.KEYBOARD="keyboard"}(i||(i={}));var l=(0,n.createContext)({});function u(){var e=(0,o.useAPI)(),t=(0,n.useContext)(l),r=t.favoriteStickers,i=t.stockItemsGroups,s=function(){var t=c(regeneratorRuntime.mark((function t(i){var n,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.cache.getGlobalHashes();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:if(o=i.sticker_id,a=n.favorite_stickers_limit,e.store.addStickersToFavorite({sticker_ids:String(o)}),r){t.next=10;break}return t.abrupt("return");case 10:e.cache.setFavoriteStickers([i,...r].slice(0,a));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=c(regeneratorRuntime.mark((function t(i){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.sticker_id,e.store.removeStickersFromFavorite({sticker_ids:String(n)}),r){t.next=4;break}return t.abrupt("return");case 4:if(o=r.findIndex((e=>e.sticker_id===n)),-1!==o){t.next=8;break}return t.abrupt("return");case 8:r.splice(o,1),e.cache.setFavoriteStickers(r);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a({},t,{addToFavorite:s,getGroupIndex:e=>e?null==i?void 0:i.findIndex((t=>(Array.isArray(t)||(t=[t]),t.includes(e)))):void 0,removeFromFavorite:u,isServiceStockItem:e=>"number"!=typeof e,isGroupedStockItem:e=>i&&void 0!==e&&!i.includes(e)})}var d=(0,n.createContext)({});function m(){return(0,n.useContext)(d)}},928525:(e,t,r)=>{"use strict";r.d(t,{API:()=>o});r(241539),r(426833),r(788674);var i,n=r(861440);!function(e){e.VMOJI="vmoji",e.STORE="store",e.ACCOUNT="account",e.MESSAGES="messages"}(i||(i={}));class o{constructor(e){var t=this,r=e.userId,o=e.onAPIRequest;this.onAPIRequest=o,this.cache=new n.APICache({userId:r,api:this});for(var a=function(e){t[e]=new Proxy(Object.create(null),{get:(r,i)=>r=>t.request({group:e,method:i,params:r})})},s=0,c=Object.values(i);s<c.length;s++){a(c[s])}}request(e){var t=e.group,r=e.method,i=e.params,n=void 0===i?{}:i;return this.onAPIRequest?this.onAPIRequest(`${t}.${r}`,n):Promise.reject(new Error("Root dependency for API not provided"))}}},861440:(e,t,r)=>{"use strict";r.d(t,{APICache:()=>l});r(892222),r(57327),r(682772),r(66992),r(821249),r(702707),r(651532),r(241539),r(788674),r(333948),r(535666);var i=r(659397),n=r(248961),o=r(641984);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},a.apply(this,arguments)}function s(e,t,r,i,n,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(i,n)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){s(o,i,n,a,c,"next",e)}function c(e){s(o,i,n,a,c,"throw",e)}a(void 0)}))}}class l extends n.Cache{constructor(e){var t=e.userId,r=e.api;super(t),this.reloading=!1,this.loadedStockItemsChunks=new Map,this.api=r;var i=e=>{var t=e.key,r=e.newValue;t===l.CACHE_UPDATE_EVENT_NAME&&null!==r&&this.dispatchEvent("change")};window.addEventListener("storage",i),this.destroy=()=>{window.removeEventListener("storage",i)}}getStockItem(e){var t=this,r=e.productId,i=e.stickerId;return c(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStockItems();case 2:if((n=e.sent)&&(r&&(o=n.find((e=>e.product.id===r))),i&&!o&&(o=n.find((e=>{var t=e.product.stickers;return t&&-1!==t.findIndex((e=>e.sticker_id===i))})))),!o){e.next=6;break}return e.abrupt("return",o);case 6:if(!r){e.next=10;break}return e.next=9,t.api.store.getStockItemByProductId({type:"stickers",product_id:String(r)}).catch((()=>{}));case 9:o=e.sent;case 10:if(!o){e.next=13;break}return t.updateStockItems([o]),e.abrupt("return",o);case 13:if(!i){e.next=17;break}return e.next=16,t.api.store.getStockItemByStickerId({sticker_id:i}).catch((()=>{}));case 16:o=e.sent;case 17:return o&&t.updateStockItems([o]),e.abrupt("return",o);case 19:case"end":return e.stop()}}),e)})))()}reload(){var e=this;return c(regeneratorRuntime.mark((function t(){var r,i,n,o,a,s,c,l,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.reloading){t.next=2;break}return t.abrupt("return",!0);case 2:return e.reloading=!0,t.next=5,e.getGlobalHashes();case 5:return r=t.sent,e.reloadHelpHints(),e.reloadVmojiAvatar(),t.next=10,Promise.all([e.api.store.hasNewItems({type:"stickers",version_hash:String(null==r?void 0:r.stickers_version_hash)}).catch((()=>null)),e.getStockItems()]);case 10:if(i=t.sent,n=i[0],o=i[1],n){t.next=16;break}return e.reloading=!1,t.abrupt("return",!1);case 16:return n.sticker_packs_version_hashes||(n.sticker_packs_version_hashes=null==r?void 0:r.sticker_packs_version_hashes),a=n.stickers_version_hash,s=n.sticker_packs_version_hashes,c=n.favorite_stickers_version_hash,l=n.image_configs_version_hash,u=n.sticker_packs_chunk_size_limit,a!==(null==r?void 0:r.stickers_version_hash)&&(o=void 0),d=[e.reloadStockItems(o,s,u),e.reloadRecentStickers()],c!==(null==r?void 0:r.favorite_stickers_version_hash)&&d.push(e.reloadFavoriteStickers()),l!==(null==r?void 0:r.image_configs_version_hash)&&d.push(e.reloadStickersImageConfigs()),t.abrupt("return",Promise.all(d).then((t=>{e.reloading=!1;var r=-1===t.findIndex((e=>!e));return r&&n&&(e.setGlobalHashes(n),e.refresh()),r})));case 23:case"end":return t.stop()}}),t)})))()}refresh(){try{localStorage.setItem(l.CACHE_UPDATE_EVENT_NAME,""),localStorage.removeItem(l.CACHE_UPDATE_EVENT_NAME)}catch(e){}}reloadHelpHints(){var e=this;return c(regeneratorRuntime.mark((function t(){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getHelpHints();case 2:if(!((r=t.sent)&&Date.now()-r.date<o.DAY)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.api.account.getHelpHints().then((e=>a({},e,{date:Date.now()}))).catch((()=>{}));case 7:i=t.sent,e.setHelpHints(i);case 9:case"end":return t.stop()}}),t)})))()}reloadVmojiAvatar(){this.hasVmojiCharacter||this.api.vmoji.getAvatar().then((e=>{var t=e.characters;this.setHasVmojiCharacter(Boolean(null==t?void 0:t.length))}))}reloadStockItems(e,t,r){var n=this;return void 0===r&&(r=25),c(regeneratorRuntime.mark((function o(){var a,s,c,l,u,d,m,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(u=null==(a=e)||null==(s=a.filter((e=>{var r=e.product.id,i=e.version_hash,n=null==t?void 0:t.find((e=>e.pack_id===r));return!!n&&n.hash!==i})))?void 0:s.map((e=>e.product.id)),!(d=!u)){o.next=6;break}return o.next=5,n.api.store.getProducts({type:"stickers",filters:"active"}).then((e=>e.items.map((e=>e.id)))).catch((()=>{}));case 5:u=o.sent;case 6:if(null==(c=u)?void 0:c.length){o.next=8;break}return o.abrupt("return",!0);case 8:return o.next=10,Promise.all((0,i.chunkArray)(u,r).map((e=>{var t=String(e);return n.loadedStockItemsChunks.get(t)||n.api.store.getStockItems({type:"stickers",product_ids:t}).then((e=>(n.loadedStockItemsChunks.set(t,e),e)))}))).then((e=>e.reduce(((e,t)=>{var r=t.items;return e=e.concat(r)}),[]).filter((e=>!Array.isArray(e))))).catch((()=>null));case 10:if(m=o.sent){o.next=13;break}return o.abrupt("return",!1);case 13:return(null==(l=e)?void 0:l.length)&&(v=new Map(m.map((e=>[e.product.id,e]))),e=e.map((e=>v.get(e.product.id)||e)),m=e),m&&u&&d&&(m=m.sort(((e,t)=>{var r,i,n=e.product.id,o=t.product.id;return Number(null==(r=u)?void 0:r.indexOf(n))-Number(null==(i=u)?void 0:i.indexOf(o))}))),o.next=17,n.setStockItems(m);case 17:return n.loadedStockItemsChunks.clear(),o.abrupt("return",!0);case 19:case"end":return o.stop()}}),o)})))()}reloadStickersImageConfigs(){var e=this;return c(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.store.getStickersImageConfigs().catch((()=>null));case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:return e.setStickersImageConfigs(r),t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t)})))()}reloadFavoriteStickers(){var e=this;return c(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.store.getFavoriteStickers().then((e=>e.items)).catch((()=>null));case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.setFavoriteStickers(r);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})))()}reloadRecentStickers(){var e=this;return c(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.messages.getRecentStickers().then((e=>e.items)).catch((()=>null));case 2:return(r=t.sent)&&e.setRecentStickers(r),t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})))()}}l.CACHE_UPDATE_EVENT_NAME=`${n.Cache.DB_NAME}_cache_update`},248961:(e,t,r)=>{"use strict";r.d(t,{CacheKey:()=>n,Tab:()=>o,Cache:()=>d});r(57327),r(226699),r(66992),r(821249),r(702707),r(651532),r(241539),r(426833),r(788674),r(132023),r(454747),r(333948),r(535666);var i,n,o,a=r(923807),s=r(891047);function c(e,t,r,i,n,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(i,n)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){c(o,i,n,a,s,"next",e)}function s(e){c(o,i,n,a,s,"throw",e)}a(void 0)}))}}!function(e){e.OBJECT="object",e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.STRING_NUMBER="string_number"}(i||(i={})),function(e){e.HELP_HINTS="helpHints",e.RECENT_EMOJI="recentEmoji",e.STOCK_ITEMS_KEY="stockItems",e.GLOBAL_HASHES_KEY="globalHashes",e.TABBAR_ACTIVE_TAB="tabbarActiveTab",e.RECENT_STICKERS_KEY="recentStickers",e.HAS_VMOJI_CHARACTER="hasVmojiCharacter",e.STICKERS_ACTIVE_TAB="stickersActiveTab",e.FAVORITE_STICKERS_KEY="favoriteStickers",e.STICKERS_IMAGE_CONFIGS="stickersImageConfigs"}(n||(n={})),function(e){e.EMOJI="emoji",e.STICKERS="stickers",e.FAVORITE="favorite",e.VMOJI="vmoji",e.RECENT="recent"}(o||(o={}));var u=Object.values(o);class d extends a.EventDispatcher{constructor(e){super(),this.userId=e,this.store=(0,s.createStore)(d.DB_NAME,"cache")}getStockItems(e){var t=(void 0===e?{}:e).active;return this.getItem(n.STOCK_ITEMS_KEY).then((e=>(e&&(e=e.sort(((e,t)=>{var r=e.product.vmoji_avatar,i=t.product.vmoji_avatar;return Number(Boolean(i))-Number(Boolean(r))})),t&&(e=e.filter((e=>e.product.active)))),e)))}setStockItems(e,t){return this.setItem(n.STOCK_ITEMS_KEY,e,t)}updateStockItems(e,t){var r=this;return l(regeneratorRuntime.mark((function i(){var o,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.getStockItems();case 2:return(o=i.sent)&&(a=new Map(o.map((e=>[e.product.id,e]))),e.forEach((e=>{var t=e.product.id;a.set(t,e)})),o=[...a.values()]),i.abrupt("return",r.setItem(n.STOCK_ITEMS_KEY,o||e,t));case 5:case"end":return i.stop()}}),i)})))()}getGlobalHashes(){return this.getItem(n.GLOBAL_HASHES_KEY)}setGlobalHashes(e){return this.setItem(n.GLOBAL_HASHES_KEY,e)}getRecentStickers(){return this.getItem(n.RECENT_STICKERS_KEY)}setRecentStickers(e,t){return this.setItem(n.RECENT_STICKERS_KEY,e,t)}getFavoriteStickers(){return this.getItem(n.FAVORITE_STICKERS_KEY)}setFavoriteStickers(e){return this.setItem(n.FAVORITE_STICKERS_KEY,e)}getStickersImageConfigs(){return this.getItem(n.STICKERS_IMAGE_CONFIGS)}setStickersImageConfigs(e){return this.setItem(n.STICKERS_IMAGE_CONFIGS,e)}get recentEmoji(){return this.getItemSync(n.RECENT_EMOJI,i.OBJECT)}setRecentEmoji(e){return this.setItemSync(n.RECENT_EMOJI,e,i.OBJECT)}get stickersActiveTab(){return this.getItemSync(n.STICKERS_ACTIVE_TAB,i.STRING_NUMBER)}setStickersActiveTab(e){return this.setItemSync(n.STICKERS_ACTIVE_TAB,e,i.STRING_NUMBER)}get tabbarActiveTab(){var e=this.getItemSync(n.TABBAR_ACTIVE_TAB,i.STRING);if(!e||u.includes(e))return e}setTabbarActiveTab(e){return this.setItemSync(n.TABBAR_ACTIVE_TAB,e,i.STRING)}getHelpHints(){return this.getItem(n.HELP_HINTS)}setHelpHints(e){return this.setItem(n.HELP_HINTS,e)}get hasVmojiCharacter(){return this.getItemSync(n.HAS_VMOJI_CHARACTER,i.BOOLEAN)}setHasVmojiCharacter(e){return this.setItemSync(n.HAS_VMOJI_CHARACTER,e,i.BOOLEAN)}clear(){return(0,s.clear)(this.store)}getItem(e){var t=this;return l(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=t.buildItemKey(e),i=d.cache.get(e),r.abrupt("return",(0,s.get)(e,t.store).then((e=>e||i)).catch((()=>i)));case 3:case"end":return r.stop()}}),r)})))()}setItem(e,t,r){var i=this;return void 0===r&&(r={}),l(regeneratorRuntime.mark((function n(){var o,a,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.notify,a=void 0===o||o,c=i.buildItemKey(e),d.cache.set(c,t),n.next=5,(0,s.set)(c,t,i.store).catch((()=>{}));case 5:a&&i.dispatchEvent("change",e);case 6:case"end":return n.stop()}}),n)})))()}deleteItem(e){var t=this.buildItemKey(e);return d.cache.delete(t),(0,s.del)(t,this.store).then((()=>{this.dispatchEvent("change",e)}))}buildItemKey(e){return`${e}-${d.VERSION}-${this.userId}`}getItemSync(e,t){e=this.buildSyncItemKey(e);try{var r=localStorage.getItem(e);if(!r)return;switch(t){case i.OBJECT:try{r=JSON.parse(r)}catch(e){return}break;case i.NUMBER:r=Number(r)||0;break;case i.STRING_NUMBER:r=Number(r)||r;break;case i.BOOLEAN:r=Boolean(Number(r))}return r}catch(t){return d.cache.get(e)}}setItemSync(e,t,r){switch(e=this.buildSyncItemKey(e),r){case i.OBJECT:t=JSON.stringify(t);break;case i.BOOLEAN:t=String(Number(t))}try{localStorage.setItem(e,t)}catch(r){d.cache.set(e,t)}}buildSyncItemKey(e){return`${d.DB_NAME}_${e}_${d.VERSION}_${this.userId}`}}d.DB_NAME="stickers",d.VERSION=2,d.cache=new Map},641984:(e,t,r)=>{"use strict";r.d(t,{DAY:()=>i});var i=864e5},101438:(e,t,r)=>{"use strict";function i(e){return 1-Math.pow(1-e,4)}r.d(t,{easeOutQuart:()=>i})},440941:(e,t,r)=>{"use strict";r.d(t,{Lang:()=>n});var i;r(66992),r(241539),r(788674),r(333948),r(560285);class n{static subscribe(e){return window.addEventListener(n.UPDATE_EVENT,e),()=>{window.removeEventListener(n.UPDATE_EVENT,e)}}}n.url=new URL("/js/lang-pack.js","https://vk.ru"),n.UPDATE_EVENT="stickers_lang_update";var o=null==(i=window.vk)?void 0:i.lang;n.url.searchParams.set("format","json"),n.url.searchParams.set("cache_age","600"),n.url.searchParams.set("name","stickers_picker"),void 0!==o&&n.url.searchParams.set("lang",String(o)),fetch(n.url).then((e=>e.json())).then((e=>{n.pack=e,dispatchEvent(new Event(n.UPDATE_EVENT))}))},358456:(e,t,r)=>{"use strict";r.d(t,{unicodeToByteHex:()=>i});r(115306);function i(e){return encodeURIComponent(e.replace(/\uFE0F/gi,"")).replace(/%/gi,"").toLowerCase()}},876863:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={emoji:"Emoji-module__emoji--E0R4u"}},774319:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={item:"EmojiItem-module__item--yFc2D",itemActive:"EmojiItem-module__itemActive--AkzuT"}},933712:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={keyboard:"EmojiKeyboard-module__keyboard--seIf5",scroll:"EmojiKeyboard-module__scroll--IQE8t",in:"EmojiKeyboard-module__in--MpLVw",item:"EmojiKeyboard-module__item--ioycj",itemHeader:"EmojiKeyboard-module__itemHeader--WIejT"}},899031:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={header:"EmojiKeyboardHeader-module__header--T8vBm",headerWide:"EmojiKeyboardHeader-module__headerWide--yGFlj",headerRegular:"EmojiKeyboardHeader-module__headerRegular--Je2cy",headerCompact:"EmojiKeyboardHeader-module__headerCompact--Sobgg",title:"EmojiKeyboardHeader-module__title--le2O6"}},979693:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={row:"EmojiKeyboardRow-module__row--p7nYm",rowWide:"EmojiKeyboardRow-module__rowWide--_1FqS",rowRegular:"EmojiKeyboardRow-module__rowRegular--QI3uo",rowCompact:"EmojiKeyboardRow-module__rowCompact--FjwVK",emoji:"EmojiKeyboardRow-module__emoji--MMe5H"}},661083:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={skeleton:"Skeleton-module__skeleton--y3Nn_"}},476001:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={keyboard:"StickersEmojiKeyboard-module__keyboard--IAgeR",keyboardWide:"StickersEmojiKeyboard-module__keyboardWide--UuFIy",keyboardCompact:"StickersEmojiKeyboard-module__keyboardCompact--bRYQD",keyboardRegular:"StickersEmojiKeyboard-module__keyboardRegular--HDFFy",in:"StickersEmojiKeyboard-module__in--nnOLo",content:"StickersEmojiKeyboard-module__content--NnOYn",item:"StickersEmojiKeyboard-module__item--e0bty",itemTransformed:"StickersEmojiKeyboard-module__itemTransformed--_w86k"}},887886:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={keyboard:"StickersKeyboard-module__keyboard--C86fi",scroll:"StickersKeyboard-module__scroll--LH1QR",scrollDisabled:"StickersKeyboard-module__scrollDisabled--jluHC",in:"StickersKeyboard-module__in--rc5Tc",item:"StickersKeyboard-module__item--g6jbo",itemHeader:"StickersKeyboard-module__itemHeader--PBLkp"}},897935:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={group:"StickersKeyboardGroup-module__group--vrLiD",groupActive:"StickersKeyboardGroup-module__groupActive--x9pK0",groupHidden:"StickersKeyboardGroup-module__groupHidden--RlGsH",item:"StickersKeyboardGroup-module__item--UZ62j"}},442489:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={in:"StickersKeyboardGroupItem-module__in--pKAYF",inPlaceholder:"StickersKeyboardGroupItem-module__inPlaceholder--fPYdQ",inActive:"StickersKeyboardGroupItem-module__inActive--VnSe5",inHidden:"StickersKeyboardGroupItem-module__inHidden--xHiol",icon:"StickersKeyboardGroupItem-module__icon--lmHKf",iconService:"StickersKeyboardGroupItem-module__iconService--JE5Pa",inIndicator:"StickersKeyboardGroupItem-module__inIndicator--krsEN"}},130146:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={groups:"StickersKeyboardGroups-module__groups--wrSRW",in:"StickersKeyboardGroups-module__in--Gd19P",items:"StickersKeyboardGroups-module__items--jvNnC",group:"StickersKeyboardGroups-module__group--yc83Y",groupIn:"StickersKeyboardGroups-module__groupIn--QaWHg",chevron:"StickersKeyboardGroups-module__chevron--LbHbr",shadow:"StickersKeyboardGroups-module__shadow--TkuFg",shadowVisible:"StickersKeyboardGroups-module__shadowVisible--noQkU",shadowLeft:"StickersKeyboardGroups-module__shadowLeft--UJOe7",shadowRight:"StickersKeyboardGroups-module__shadowRight--u7UbB",chevronActive:"StickersKeyboardGroups-module__chevronActive--yuxkP",chevronLeft:"StickersKeyboardGroups-module__chevronLeft--fV5nj",chevronRight:"StickersKeyboardGroups-module__chevronRight--LAenO"}},926464:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={popper:"PeerInfo-module__popper--zfcdJ",icon:"PeerInfo-module__icon--QzOQL"}},754542:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={header:"StickersKeyboardHeader-module__header--XoIRC",headerWide:"StickersKeyboardHeader-module__headerWide--MqJ_r",headerRegular:"StickersKeyboardHeader-module__headerRegular--eytC7",headerCompact:"StickersKeyboardHeader-module__headerCompact--zdD4p",headerAside:"StickersKeyboardHeader-module__headerAside--_UZ4k",title:"StickersKeyboardHeader-module__title--cCIDg",icon:"StickersKeyboardHeader-module__icon--CGri7",settings:"StickersKeyboardHeader-module__settings--QVxII",brush:"StickersKeyboardHeader-module__brush--iGjZ1",counter:"StickersKeyboardHeader-module__counter--gXRxa"}},439942:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={row:"StickersKeyboardRow-module__row--DzKPF",rowWide:"StickersKeyboardRow-module__rowWide--fdCiC",rowRegular:"StickersKeyboardRow-module__rowRegular--_fql3",rowCompact:"StickersKeyboardRow-module__rowCompact--O2aKY",rowStickers:"StickersKeyboardRow-module__rowStickers--RcxNf",sticker:"StickersKeyboardRow-module__sticker--rcpAJ"}},124453:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={card:"StickersKeyboardVmojiRow-module__card--ETJRr",image:"StickersKeyboardVmojiRow-module__image--tOQ2Z",button:"StickersKeyboardVmojiRow-module__button--iKdxO"}},963849:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={tabbar:"Tabbar-module__tabbar--px5Db",item:"Tabbar-module__item--Wbo6F"}},81251:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={item:"TabbarItem-module__item--xsZ69",itemActive:"TabbarItem-module__itemActive--Fl5la",indicator:"TabbarItem-module__indicator--F2KsU",indicatorNone:"TabbarItem-module__indicatorNone--SBiZS",indicatorPrimary:"TabbarItem-module__indicatorPrimary--vnWCH",indicatorSecondary:"TabbarItem-module__indicatorSecondary--sVtQs",indicatorDestructive:"TabbarItem-module__indicatorDestructive--usYTd"}},209146:(e,t,r)=>{"use strict";r.r(t),r.d(t,{StickerPickerViewer:()=>m});var i=r(785893),n=r(973935),o=r(873589),a=r(447768),s=r(39196),c=r(730304),l=r(351554),u=r(394912),d=r(480143),m=function(){function e(){var e=this;this.currentParent=null,this.onlyEmoji=!1,this.SELECTOR="StickerPickerViewer",this.IS_OPEN_SELECTOR="StickerPickerViewer--isOpen",this.IS_OPEN_BODY_SELECTOR="StickerPickerIsOpen",this.CLOSE_TIMEOUT=300,this.OPEN_TIMEOUT=100,this.updateAfterHideTransitionEnd=function(){e.dispatchCustomEvent({isVisible:!1,packId:void 0}),window.document.body.classList.remove(e.IS_OPEN_BODY_SELECTOR),e.removeUpdateAfterHideTransitionEnd()},this.addUpdateAfterHideTransitionEnd=function(){var t;null===(t=e.wrapper)||void 0===t||t.addEventListener("transitionend",e.updateAfterHideTransitionEnd)},this.removeUpdateAfterHideTransitionEnd=function(){var t;null===(t=e.wrapper)||void 0===t||t.removeEventListener("transitionend",e.updateAfterHideTransitionEnd)},this.positionSizeManager=new u.PositionSizeManager(this),this.api=new d.API}return e.prototype.hide=function(){var e=this;this.stopShowing(),this.closeTimeoutId=setTimeout((function(){e.hidePicker()}),this.CLOSE_TIMEOUT)},e.prototype.stopHiding=function(){clearTimeout(this.closeTimeoutId),this.removeUpdateAfterHideTransitionEnd()},e.prototype.stopShowing=function(){clearTimeout(this.openTimeoutId)},e.prototype.show=function(e){var t=this;e&&(this.optId=(0,o.data)(e.parentNode,"optId"),this.openTimeoutId=setTimeout((function(){null===t.currentParent||t.wrapper&&!t.wrapper.children.length?t.buildPicker(e):t.currentParent!==e.parentElement?t.rebuildPicker(e):(t.stopHiding(),requestAnimationFrame((function(){t.showPicker()}))),t.positionSizeManager.manageSizeAndPosition()}),this.OPEN_TIMEOUT))},e.prototype.destroy=function(){this.wrapper&&(n.unmountComponentAtNode(this.wrapper),this.wrapper.remove())},e.prototype.rebuildPicker=function(e){var t;null===(t=this.wrapper)||void 0===t||t.remove(),this.stopHiding(),this.buildPicker(e)},e.prototype.buildPicker=function(e){var t=this,r=e.parentElement;r&&(r.insertAdjacentHTML("beforeend",'\n            <div class="'+this.SELECTOR+'"></div>\n        '),this.wrapper=r.querySelector("."+this.SELECTOR),this.wrapper&&(this.wrapper.onmouseenter=function(){return t.stopHiding()},this.wrapper.onmouseleave=function(){return t.hide()},this.wrapper.onclick=function(e){return e.stopPropagation()},n.render((0,i.jsx)(a.StickerPicker,{onlyEmoji:this.onlyEmoji,packIdToOpen:this.packId},void 0),this.wrapper),requestAnimationFrame((function(){t.showPicker()}))),this.currentParent=r)},e.prototype.showPicker=function(){var e;null===(e=this.wrapper)||void 0===e||e.classList.add(this.IS_OPEN_SELECTOR),this.dispatchCustomEvent({packId:this.packId,isVisible:!0}),this.moveStickersHints(),this.initPeerId(),window.document.body.classList.add(this.IS_OPEN_BODY_SELECTOR)},e.prototype.hidePicker=function(){this.wrapper&&(this.addUpdateAfterHideTransitionEnd(),this.wrapper.classList.remove(this.IS_OPEN_SELECTOR),this.packId=void 0,this.moveStickersHints(),this.clearPeerId())},e.prototype.dispatchCustomEvent=function(e){var t;null===(t=this.wrapper)||void 0===t||t.dispatchEvent((0,s.createEvent)(e))},Object.defineProperty(e.prototype,"isShown",{get:function(){var e;return null===(e=this.wrapper)||void 0===e?void 0:e.classList.contains(this.IS_OPEN_SELECTOR)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDown",{get:function(){return this.positionSizeManager.isDown},enumerable:!1,configurable:!0}),e.prototype.moveStickersHints=function(){(0,c.moveStickersHintsToStickerPicker)(this.optId,!0)},e.prototype.showPack=function(e,t){var r,i,n=this,o=(0,l.getClosestTextInput)(t);if(o&&e){var a=null===(i=null===(r=o.parentNode)||void 0===r?void 0:r.parentNode)||void 0===i?void 0:i.querySelector("._emoji_btn");if(a){this.packId=e,this.show(a),o.focus();var s=function(e){var t;(null===(t=e.target.classList)||void 0===t?void 0:t.contains("sticker_img"))||(n.hidePicker(),document.removeEventListener("click",s))};document.addEventListener("click",s)}}},e.prototype.initPeerId=function(){var e;this.peerId=(null===(e=window.reforgedME)||void 0===e?void 0:e.stickersSelectedPeerId)||window.cur.peer},e.prototype.clearPeerId=function(){this.peerId=void 0},e}()},447768:(e,t,r)=>{"use strict";r.d(t,{StickerPicker:()=>k});var i=r(570655),n=r(785893),o=r(86894),a=r(248961),s=r(521005),c=r(480143),l=r(944340),u=r(798262),d=r(239914),m=r(751595),v=r(194141),f=r(354454),h=r(844142),p=function(){return window.StickerPickerViewer.optId},b=(0,v.getVariant)(),k=function(e){var t=e.onlyEmoji,r=e.packIdToOpen,v=(0,f.useUpdateOnEvents)({isVisible:!0,packId:r}),k=v.isVisible,g=v.packId,E=t?a.Tab.EMOJI:void 0;return(0,n.jsx)(o.ConfigProvider,(0,i.__assign)({platform:o.Platform.VKCOM,scheme:"inherit"},{children:(0,n.jsx)(s.StickersEmojiKeyboard,{userId:window.vk.id,isVisible:k,visibleTab:E,variant:b,activeProductId:g,onAPIRequest:c.onAPIRequest,onShopClick:function(){var e;(0,u.statlogsValueEvent)("sticker_picker","tab_open","shop");var t=p();null===(e=window.Emoji)||void 0===e||e.showStickersStore(t)},onTabChange:function(e){var t=e.tab;e.stockItem||(0,u.statlogsValueEvent)("sticker_picker","tab_open",t)},onEmojiInsert:function(e){var t;(0,u.statlogsValueEvent)("sticker_picker","emoji_click");var r=(0,d.emojiSymbolToByteHex)(e),i=p();null===(t=window.Emoji)||void 0===t||t.addEmoji(i,r)},onStickerSend:function(e,t){var r;void 0===t&&(t="keyboard");var i=p();e.sticker_id&&(null===(r=window.Emoji)||void 0===r||r.stickerClick(i,e.sticker_id,null,t))},onVmojiEditClick:function(e){var t=e.character_id;(0,l.showVmojiConstructor)(void 0,{character_id:t})},onVmojiCreateClick:function(){var e;null===(e=window.Emoji)||void 0===e||e.createVmojiAvatar()},onStockItemGiftClick:function(e){var t=e.product.id,r=window.Emoji,i=window.StickerPickerViewer.peerId,n=void 0===i?void 0:i,o={sticker_referrer:"stickers_keyboard2"};n&&(h.Ranges.isUserIdTransitional(n)||h.Ranges.isChatOrChannelPeer(n))?null==r||r.giftSticker(t,n,null,o):null==r||r.giftSticker(t,"",null,o)},onStockItemSettingsClick:function(e){var t,r=e.product,i=r.id,n=r.vmoji_avatar;n?null===(t=window.Emoji)||void 0===t||t.showVmojiAvatar(window.vk.id,n.character_id,i):(0,m.previewStickerProduct)(i,{settings:!0})}},void 0)}),void 0)}},354454:(e,t,r)=>{"use strict";r.d(t,{useUpdateOnEvents:()=>a});var i=r(570655),n=r(667294),o=r(39196),a=function(e){var t=(0,i.__read)((0,n.useReducer)((function(e,t){return(0,i.__assign)((0,i.__assign)({},e),t)}),e),2),r=t[0],a=t[1];return(0,n.useEffect)((function(){function e(e){var t=e.detail;a(t)}var t=window.StickerPickerViewer.wrapper;return null==t||t.addEventListener(o.EVENT_KEY,e),function(){null==t||t.removeEventListener(o.EVENT_KEY,e)}}),[]),r}},480143:(e,t,r)=>{"use strict";r.d(t,{onAPIRequest:()=>a,API:()=>s});var i=r(189798),n=r(928525),o=["store.getStockItems"],a=function(e,t){return void 0===t&&(t={}),(0,i.api)(e,t,{grouping:!o.includes(e)})},s=function(){function e(){this.api=new n.API({userId:window.vk.id,onAPIRequest:a})}return e.prototype.getPack=function(e){return this.api.cache.getStockItem(e)},e}()},39196:(e,t,r)=>{"use strict";r.d(t,{EVENT_KEY:()=>i,createEvent:()=>n});var i="sticker_picker_event",n=function(e){return new CustomEvent(i,{detail:e})}},394912:(e,t,r)=>{"use strict";r.d(t,{PositionSizeManager:()=>n});var i=r(850624),n=function(){function e(e){this.IN_VK_WIDGET=window.vk.widget,this.CSS_VAR_HEIGHT="--sticker-picker-viewer-height",this.CSS_VAR_WIDTH="--sticker-picker-viewer-width",this.CSS_VAR_VERTICAL_MARGIN_FROM_ELEMENT="--vertical-margin-from-element",this.UP_POSITION_SELECTOR="StickerPickerViewer--up",this.DOWN_POSITION_SELECTOR="StickerPickerViewer--down",this.MIN_PICKER_HEIGHT=this.IN_VK_WIDGET?88:240,this.MAX_PICKER_HEIGHT=548,this.MARGIN_FROM_EDGES=32,this.MARGIN_FROM_ELEMENT=6,this.viewer=e}return e.prototype.manageSizeAndPosition=function(){var e=this.viewer,t=e.position,r=e.height;t&&r?this.setPositionAndSize():this.repositionAndResize()},e.prototype.repositionAndResize=function(){var e=this.viewer,t=e.wrapper,r=e.currentParent;if(t&&r){var i,n=r.getBoundingClientRect(),o=n.top,a=n.bottom,s=window.innerHeight,c=o-this.MARGIN_FROM_ELEMENT,l=s-a+this.MARGIN_FROM_ELEMENT;if(l<c){this.setPositionUp();var u=parseInt(getComputedStyle(document.body).getPropertyValue("--header-height"));i=c-this.MARGIN_FROM_EDGES-u}else this.setPositionDown(),i=l-this.MARGIN_FROM_EDGES;i>=this.MAX_PICKER_HEIGHT?i=this.MAX_PICKER_HEIGHT:i<=this.MIN_PICKER_HEIGHT&&(i=this.MIN_PICKER_HEIGHT),i=Math.floor(i),t.style.setProperty(this.CSS_VAR_HEIGHT,i+"px"),this.setMarginFromBaseElement()}},e.prototype.setPositionAndSize=function(){var e=this.viewer,t=e.wrapper,r=e.position,n=e.height;switch(null==t||t.style.setProperty(this.CSS_VAR_HEIGHT,n+"px"),this.setMarginFromBaseElement(),r){case i.STICKER_PICKER_POSITION.UP:this.setPositionUp();break;case i.STICKER_PICKER_POSITION.DOWN:this.setPositionDown();break;default:this.setPositionUp()}},e.prototype.setMarginFromBaseElement=function(){var e=this.viewer,t=e.wrapper,r=e.currentParent;if(r&&t){var i=r.getBoundingClientRect().height;t.style.setProperty(this.CSS_VAR_VERTICAL_MARGIN_FROM_ELEMENT,i+this.MARGIN_FROM_ELEMENT+"px")}},e.prototype.setPositionDown=function(){var e=this.viewer.wrapper;null==e||e.classList.add(this.DOWN_POSITION_SELECTOR),null==e||e.classList.remove(this.UP_POSITION_SELECTOR)},e.prototype.setPositionUp=function(){var e=this.viewer.wrapper;null==e||e.classList.add(this.UP_POSITION_SELECTOR),null==e||e.classList.remove(this.DOWN_POSITION_SELECTOR)},Object.defineProperty(e.prototype,"isDown",{get:function(){var e=this.viewer.wrapper;return null==e?void 0:e.classList.contains(this.DOWN_POSITION_SELECTOR)},enumerable:!1,configurable:!0}),e}()},351554:(e,t,r)=>{"use strict";r.d(t,{getClosestTextInput:()=>i});var i=function(e){if(e.getAttribute("contenteditable"))return e;var t=e.closest(".js-im-page, .fc_tab, .mv_chat");return t?t.matches(".fc_tab")?t.querySelector(".fc_editable"):t.matches(".js-im-page")?document.querySelector("._im_text"):t.matches(".mv_chat")?t.querySelector(".mv_chat_reply_input"):null:null}},194141:(e,t,r)=>{"use strict";r.d(t,{getVariant:()=>s});var i=r(127927),n=i.StickerEmojiKeyboardVariant.COMPACT,o=i.StickerEmojiKeyboardVariant.REGULAR,a=i.StickerEmojiKeyboardVariant.WIDE;function s(){var e=window.vk,t=window.innerWidth;if(e.widget){if(t<360)return n;if(t<430)return o}return a}},850624:(e,t,r)=>{"use strict";var i;r.d(t,{STICKER_PICKER_POSITION:()=>i}),function(e){e.UP="up",e.DOWN="down"}(i||(i={}))}}]);try{stManager.done("dist/fba43c7a1c8ad19aa306e4c66812a52a.f50b883cde2d245ad9be.js")}catch(e){}